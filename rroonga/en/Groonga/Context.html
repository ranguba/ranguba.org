<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../../ranguba.css" type="text/css" />
    <link rel="shortcut icon" href="../../../favicon.ico" />
    <link rel="icon" href="../../../favicon.png" />
    <title>
  Class: Groonga::Context
  
    &mdash; rroonga
  
 - Ranguba</title>


  <link rel="stylesheet" href="../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Groonga::Context";
  relpath = '../';
</script>


  <script type="text/javascript" charset="utf-8" src="../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
<div class="header">
  <div class="title">
    <a href="../../../">
      <span class="title">
  Class: Groonga::Context
  
    &mdash; rroonga
  
</span>
      <span class="title-separator">-</span>
      <span class="title-project">Ranguba</span>
    </a>
  </div>
  <ul class="other-languages">
    <li id="other-language-japanese" lang="ja" xml:lang="ja"><a href="../../../rroonga/ja/Groonga/Context.html">日本語</a></li>
  </ul>
  <ul class="menu">
    <li id="menu-reference"><a href="../../../rroonga/en/">Reference Manual</a></li>
    <li id="menu-tutorial"><a href="../../../rroonga/en/file.tutorial.html">Tutorial</a></li>
    <li id="menu-install"><a href="../../../#install-rroonga">Install</a></li>
    <li id="menu-developer"><a href="../../../developer.html">Developer</a></li>
  </ul>
</div>

<div class="content">


      <div id="header">
        <div id="menu">
  
    <a href="../alphabetical_index.html">Index (C)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../Groonga.html" title="Groonga (module)">Groonga</a></span></span>
     &raquo; 
    <span class="title">Context</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Class: Groonga::Context
  
  
  
</h1>
<div class="box_info">
  
  <dl>
    <dt>Inherits:</dt>
    <dd>
      <span class="inheritName">Data</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">Data</li>
          
            <li class="next">Groonga::Context</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
    </dd>
  </dl>
  

  
  
  
  
  

  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>ext/groonga/rb-grn-context.c<span class="defines">,<br />
  lib/groonga/context.rb,<br /> lib/groonga/context/command-executor.rb,<br /> ext/groonga/rb-grn-context.c</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>groonga全体に渡る情報を管理するオブジェクト。通常のアプリ
ケーションでは1つのコンテキストを作成し、それを利用する。
複数のコンテキストを利用する必要はない。</p>

<p>デフォルトで使用されるコンテキストは
<span class='object_link'><a href="#default-class_method" title="Groonga::Context.default (method)">Context.default</a></span> でアクセスできる。コンテキ
ストを指定できる箇所でコンテキストの指定を省略したり +nil+
を指定した場合は <span class='object_link'><a href="#default-class_method" title="Groonga::Context.default (method)">Context.default</a></span> が利用さ
れる。</p>

<p>また、デフォルトのコンテキストは必要になると暗黙のうちに
作成される。そのため、コンテキストを意識することは少ない。</p>

<p>暗黙のうちに作成されるコンテキストにオプションを指定する
場合は <span class='object_link'><a href="#default_options=-class_method" title="Groonga::Context.default_options= (method)">Context.default_options=</a></span> を使用
する。</p>


  </div>
</div>
<div class="tags">
  

</div><h2>Defined Under Namespace</h2>
<p class="children">
  
    
  
    
      <strong class="classes">Classes:</strong> <span class='object_link'><a href="Context/CommandExecutor.html" title="Groonga::Context::CommandExecutor (class)">CommandExecutor</a></span>
    
  
</p>







  
    <h2>
      Class Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default-class_method" title="default (class method)">.<strong>default</strong>  &#x21d2; Groonga::Context </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>デフォルトのコンテキストを返す。デフォルトのコンテキスト が作成されていない場合は暗黙のうちに作成し、それを返す。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default=-class_method" title="default= (class method)">.<strong>default=</strong>(context)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>デフォルトのコンテキストを設定する。 +nil+ を指定すると、 デフォルトのコンテキストをリセットする。リセットすると、次 回 <span class='object_link'><a href="#default-class_method" title="Groonga::Context.default (method)">Context.default</a></span> を呼び出したときに新しくコ ンテキストが作成される。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_options-class_method" title="default_options (class method)">.<strong>default_options</strong>  &#x21d2; ::Hash or nil </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>コンテキストを作成する時に利用するデフォルトのオプション を返す。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_options=-class_method" title="default_options= (class method)">.<strong>default_options=</strong>(options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>コンテキストを作成する時に利用するデフォルトのオプション を設定する。利用可能なオプションは new を参照。.</p>
</div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#[]-instance_method" title="#[] (instance method)">#<strong>[]</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>コンテキスト管理下にあるオブジェクトを返す。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#close-instance_method" title="#close (instance method)">#<strong>close</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Closes the <em>context</em>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#closed%3F-instance_method" title="#closed? (instance method)">#<strong>closed?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns whether the <em>context</em> is closed by #close or not.</p>
</div></span>
  
</li>

      
        <li class="public deprecated">
  <span class="summary_signature">
    
      <a href="#conf-instance_method" title="#conf (instance method)">#<strong>conf</strong>  &#x21d2; Groonga::Config </a>
    

    
  </span>
  
  
  
  
  
  <span class="deprecated note title">deprecated</span>
  

  
    <span class="summary_desc"><strong>Deprecated.</strong> <div class='inline'><p>since 5.1.1. Use <span class='object_link'><a href="#config-instance_method" title="Groonga::Context#config (method)">#config</a></span> instead.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#config-instance_method" title="#config (instance method)">#<strong>config</strong>  &#x21d2; Groonga::Config </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>The database level configuration sets of this context.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#connect-instance_method" title="#connect (instance method)">#<strong>connect</strong>(options = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>groongaサーバに接続する。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_database-instance_method" title="#create_database (instance method)">#<strong>create_database</strong>(path = nil, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>This is convenience method.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#database-instance_method" title="#database (instance method)">#<strong>database</strong>  &#x21d2; Groonga::Database </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>コンテキストが使うデータベースを返す。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#encoding-instance_method" title="#encoding (instance method)">#<strong>encoding</strong>  &#x21d2; Groonga::Encoding </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>コンテキストが使うエンコーディングを返す。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#encoding=-instance_method" title="#encoding= (instance method)">#<strong>encoding=</strong>(encoding)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>コンテキストが使うエンコーディングを設定する。エンコーディ ングの指定のしかたは <span class='object_link'><a href="Encoding.html" title="Groonga::Encoding (module)">Encoding</a></span> を参照。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#execute_command-instance_method" title="#execute_command (instance method)">#<strong>execute_command</strong>(name, parameters = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#new (instance method)">#<strong>new</strong>(options = nil)  &#x21d2; Object </a>
    

    
  </span>
  
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>コンテキストを作成する。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>コンテキストの中身を人に見やすい文字列で返す。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#match_escalation_threshold-instance_method" title="#match_escalation_threshold (instance method)">#<strong>match_escalation_threshold</strong>  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>このコンテキストを使って検索したときに検索の挙動をエスカレー ションする閾値を返します。 エスカレーションの詳細は “groongaの検索の仕様に関するドキュメント”:http://groonga.org/docs/spec/search.html#match-escalation-threshold を参照してください。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#match_escalation_threshold=-instance_method" title="#match_escalation_threshold= (instance method)">#<strong>match_escalation_threshold=</strong>(match_escalation_threshold)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>このコンテキストを使って検索したときに検索の挙動をエスカレー ションする閾値を設定します。 エスカレーションの詳細は “groongaの検索の仕様に関するドキュメント”:http://groonga.org/docs/spec/search.html#match-escalation-threshold を参照してください。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#object_created-instance_method" title="#object_created (instance method)">#<strong>object_created</strong>(object)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#open_database-instance_method" title="#open_database (instance method)">#<strong>open_database</strong>(path, &amp;block)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>path</em> にある既存のデータベースを開く。ブロックを指定した場 合はブロックに開いたデータベースを渡し、ブロックを抜けると きに閉じる。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#opened%3F-instance_method" title="#opened? (instance method)">#<strong>opened?</strong>(id)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Checks whether object with the ID is opened or not.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#pop_memory_pool-instance_method" title="#pop_memory_pool (instance method)">#<strong>pop_memory_pool</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Pops the pushed memory pool.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#push_memory_pool-instance_method" title="#push_memory_pool (instance method)">#<strong>push_memory_pool</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Pushes a new memory pool to the context.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#receive-instance_method" title="#receive (instance method)">#<strong>receive</strong>  &#x21d2; [ID, String] </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>groongaサーバからクエリ実行結果文字列を受信する。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#register_plugin-instance_method" title="#register_plugin (instance method)">#<strong>register_plugin</strong>(name_or_options)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>groongaのプラグインディレクトリにあるプラグイン <em>name</em> を登録する。 <em>path</em> を指定するとプラグインディレクトリ以 外にあるプラグインを登録することができる。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#restore-instance_method" title="#restore (instance method)">#<strong>restore</strong>(dumped_commands) {|command, response| ... } &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Restore commands dumped by “grndump” command.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ruby_encoding-instance_method" title="#ruby_encoding (instance method)">#<strong>ruby_encoding</strong>  &#x21d2; ::Encoding </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Gets the encoding used by the context as Ruby’s encoding object.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#select-instance_method" title="#select (instance method)">#<strong>select</strong>(table, options = {})  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>table</em> から指定した条件にマッチするレコードの値を取得 する。 <em>table</em> はテーブル名かテーブルオブジェクトを指定 する。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#send-instance_method" title="#send (instance method)">#<strong>send</strong>(string)  &#x21d2; Integer </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>groongaサーバにクエリ文字列を送信する。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#support_arrow%3F-instance_method" title="#support_arrow? (instance method)">#<strong>support_arrow?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#support_lz4%3F-instance_method" title="#support_lz4? (instance method)">#<strong>support_lz4?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>If Groonga supports LZ4 compression, it returns +true+, otherwise it returns +false+.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#support_lzo%3F-instance_method" title="#support_lzo? (instance method)">#<strong>support_lzo?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>If Groonga supports LZO compression, it returns +true+, otherwise it returns +false+.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#support_zlib%3F-instance_method" title="#support_zlib? (instance method)">#<strong>support_zlib?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>groongaがZlibサポート付きでビルドされていれば +true+ 、そう でなければ +false+ を返す。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#support_zstd%3F-instance_method" title="#support_zstd? (instance method)">#<strong>support_zstd?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#unregister_plugin-instance_method" title="#unregister_plugin (instance method)">#<strong>unregister_plugin</strong>(name_or_path)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Unregister a registered <code>name</code> plugin.</p>
</div></span>
  
</li>

      
    </ul>
  


  <div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <h3 class="signature first" id="initialize-instance_method">
  
    #<strong>new</strong>(options = nil)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>コンテキストを作成する。</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>::Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The name and value
pairs. Omitted names are initialized as the default value.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:encoding</span>
          <span class="type">(<tt><span class='object_link'><a href="Encoding.html" title="Groonga::Encoding (module)">Groonga::Encoding</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>The encoding
エンコーディングを指定する。エンコーディングの指定方法
は <span class='object_link'><a href="Encoding.html" title="Groonga::Encoding (module)">Encoding</a></span> を参照。</p>
</div>
          
        </li>
      
    </ul>
  


</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


436
437
438
439
440
441
442
443
444
445
446
447
448
449
450
451
452
453
454
455
456
457
458
459
460
461
462
463
464
465
466
467
468
469
470
471
472
473
474
475
476
477
478
479
480
481
482</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 436</span>

static VALUE
rb_grn_context_initialize (int argc, VALUE *argv, VALUE self)
{
    RbGrnContext *rb_grn_context;
    grn_ctx *context;
    int flags = 0; /* TODO: GRN_CTX_PER_DB */
    VALUE options, default_options;
    VALUE rb_encoding;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;options);
    default_options = rb_grn_context_s_get_default_options(rb_obj_class(self));
    if (NIL_P(default_options))
        default_options = rb_hash_new();

    if (NIL_P(options))
        options = rb_hash_new();
    options = rb_funcall(default_options, rb_intern(&quot;merge&quot;), 1, options);

    rb_grn_scan_options(options,
                        &quot;encoding&quot;, &amp;rb_encoding,
                        NULL);

    rb_grn_context = ALLOC(RbGrnContext);
    DATA_PTR(self) = rb_grn_context;
    rb_grn_context-&gt;self = self;
    grn_ctx_init(&amp;(rb_grn_context-&gt;context_entity), flags);
    context = rb_grn_context-&gt;context = &amp;(rb_grn_context-&gt;context_entity);
    rb_grn_context_check(context, self);

    GRN_CTX_USER_DATA(context)-&gt;ptr = rb_grn_context;
    rb_grn_context-&gt;floating_objects = NULL;
    rb_grn_context_reset_floating_objects(rb_grn_context);
    grn_ctx_set_finalizer(context, rb_grn_context_finalizer);

    if (!NIL_P(rb_encoding)) {
        grn_encoding encoding;

        encoding = RVAL2GRNENCODING(rb_encoding, NULL);
        GRN_CTX_SET_ENCODING(context, encoding);
    }

    rb_iv_set(self, &quot;@memory_pools&quot;, rb_ary_new());

    debug(&quot;context new: %p\n&quot;, context);

    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
  
</div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="default-class_method">
  
    .<strong>default</strong>  &#x21d2; <tt><span class='object_link'><a href="" title="Groonga::Context (class)">Groonga::Context</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>デフォルトのコンテキストを返す。デフォルトのコンテキスト
が作成されていない場合は暗黙のうちに作成し、それを返す。</p>

<p>暗黙のうちにコンテキストを作成する場合は、
<span class='object_link'><a href="#default_options-class_method" title="Groonga::Context.default_options (method)">default_options</a></span> に設定されているオプ
ションを利用する。</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="" title="Groonga::Context (class)">Groonga::Context</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


366
367
368
369
370
371
372
373
374
375
376
377</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 366</span>

static VALUE
rb_grn_context_s_get_default (VALUE self)
{
    VALUE context;

    context = rb_cv_get(self, &quot;@@default&quot;);
    if (NIL_P(context)) {
        context = rb_funcall(cGrnContext, rb_intern(&quot;new&quot;), 0);
        rb_cv_set(self, &quot;@@default&quot;, context);
    }
    return context;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default=-class_method">
  
    .<strong>default=</strong>(context)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>デフォルトのコンテキストを設定する。 +nil+ を指定すると、
デフォルトのコンテキストをリセットする。リセットすると、次
回 <span class='object_link'><a href="#default-class_method" title="Groonga::Context.default (method)">default</a></span> を呼び出したときに新しくコ
ンテキストが作成される。</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


393
394
395
396
397
398</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 393</span>

static VALUE
rb_grn_context_s_set_default (VALUE self, VALUE context)
{
    rb_cv_set(self, &quot;@@default&quot;, context);
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_options-class_method">
  
    .<strong>default_options</strong>  &#x21d2; <tt>::Hash or nil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>コンテキストを作成する時に利用するデフォルトのオプション
を返す。</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>::Hash or nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


407
408
409
410
411</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 407</span>

static VALUE
rb_grn_context_s_get_default_options (VALUE self)
{
    return rb_cv_get(self, &quot;@@default_options&quot;);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_options=-class_method">
  
    .<strong>default_options=</strong>(options)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>コンテキストを作成する時に利用するデフォルトのオプション
を設定する。利用可能なオプションは
new を参照。</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


420
421
422
423
424
425</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 420</span>

static VALUE
rb_grn_context_s_set_default_options (VALUE self, VALUE options)
{
    rb_cv_set(self, &quot;@@default_options&quot;, options);
    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="[]-instance_method">
  
    
      <span class="overload">#<strong>[]</strong>(name)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Groonga::Object</a></span> or nil</tt> </span>
    
      <span class="overload">#<strong>[]</strong>(id)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Groonga::Object</a></span> or nil</tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>コンテキスト管理下にあるオブジェクトを返す。</p>

<p><em>name</em> として文字列を指定した場合はオブジェクト名でオブジェ
クトを検索する。</p>

<p><em>id</em> として数値を指定した場合はオブジェクトIDでオブジェク
トを検索する。</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>[]</strong>(name)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Groonga::Object</a></span> or nil</tt> </span>
        <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Groonga::Object</a></span> or nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>[]</strong>(id)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Groonga::Object</a></span> or nil</tt> </span>
        <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Groonga::Object</a></span> or nil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


945
946
947
948
949
950
951
952
953
954
955
956
957
958
959
960
961
962
963
964
965
966
967
968
969
970
971
972
973
974
975
976
977
978
979
980
981</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 945</span>

static VALUE
rb_grn_context_array_reference (VALUE self, VALUE name_or_id)
{
    grn_ctx *context;
    grn_obj *object;
    const char *name;
    unsigned int name_size;
    grn_id id;

    context = SELF(self);
    switch (TYPE(name_or_id)) {
      case T_SYMBOL:
        name = RSYMBOL2CSTR(name_or_id);
        name_size = strlen(name);
        object = rb_grn_context_get_backward_compatibility(context,
                                                           name, name_size);
        break;
      case T_STRING:
        name = StringValuePtr(name_or_id);
        name_size = RSTRING_LEN(name_or_id);
        object = rb_grn_context_get_backward_compatibility(context,
                                                           name, name_size);
        break;
      case T_FIXNUM:
        id = NUM2UINT(name_or_id);
        object = grn_ctx_at(context, id);
        break;
      default:
        rb_raise(rb_eArgError,
                 &quot;should be String, Symbol or unsigned integer: %s&quot;,
                 rb_grn_inspect(name_or_id));
        break;
    }
    rb_grn_context_check(context, name_or_id);

    return GRNOBJECT2RVAL(Qnil, context, object, GRN_FALSE);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="close-instance_method">
  
    #<strong>close</strong>  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Closes the <em>context</em>. Closed <em>context</em> can’t be used
anymore.</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


490
491
492
493
494
495
496
497
498
499
500
501</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 490</span>

static VALUE
rb_grn_context_close (VALUE self)
{
    RbGrnContext *rb_grn_context;

    Data_Get_Struct(self, RbGrnContext, rb_grn_context);
    if (rb_grn_context-&gt;context) {
        rb_grn_context_fin(rb_grn_context);
    }

    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="closed?-instance_method">
  
    #<strong>closed?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns whether the <em>context</em> is closed by #close or not.</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


508
509
510
511
512
513
514
515
516</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 508</span>

static VALUE
rb_grn_context_closed_p (VALUE self)
{
    RbGrnContext *rb_grn_context;

    Data_Get_Struct(self, RbGrnContext, rb_grn_context);

    return CBOOL2RVAL(rb_grn_context-&gt;context == NULL);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="conf-instance_method">
  
    #<strong>conf</strong>  &#x21d2; <tt><span class='object_link'><a href="Config.html" title="Groonga::Config (class)">Groonga::Config</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <div class="note deprecated"><strong>Deprecated.</strong> <div class='inline'><p>since 5.1.1. Use <span class='object_link'><a href="#config-instance_method" title="Groonga::Context#config (method)">#config</a></span> instead.</p>
</div></div>
<p>Returns The database level configuration sets of
this context.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Config.html" title="Groonga::Config (class)">Groonga::Config</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The database level configuration sets of
this context.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>5.0.9</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


355
356
357</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/groonga/context.rb', line 355</span>

<span class='kw'>def</span> <span class='id identifier rubyid_conf'>conf</span>
  <span class='id identifier rubyid_config'>config</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="config-instance_method">
  
    #<strong>config</strong>  &#x21d2; <tt><span class='object_link'><a href="Config.html" title="Groonga::Config (class)">Groonga::Config</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns The database level configuration sets of
this context.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Config.html" title="Groonga::Config (class)">Groonga::Config</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The database level configuration sets of
this context.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>5.1.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


363
364
365</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/groonga/context.rb', line 363</span>

<span class='kw'>def</span> <span class='id identifier rubyid_config'>config</span>
  <span class='ivar'>@config</span> <span class='op'>||=</span> <span class='const'><span class='object_link'><a href="Config.html" title="Groonga::Config (class)">Config</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Config.html#initialize-instance_method" title="Groonga::Config#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="connect-instance_method">
  
    #<strong>connect</strong>(options = nil)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>groongaサーバに接続する。</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>::Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>nil</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>利用可能なオプションは次の通り。</p>
</div>
      
    </li>
  
</ul>

  
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:host</span>
          <span class="type">(<tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>localhost</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>groongaサーバのホスト名。またはIPアドレス。省略すると
“localhost”に接続する。</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:port</span>
          <span class="type">(<tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>10041</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>groongaサーバのポート番号。省略すると10041番ポートに接
続する。</p>
</div>
          
        </li>
      
    </ul>
  


</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


772
773
774
775
776
777
778
779
780
781
782
783
784
785
786
787
788
789
790
791
792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 772</span>

static VALUE
rb_grn_context_connect (int argc, VALUE *argv, VALUE self)
{
    grn_ctx *context;
    const char *host;
    int port;
    int flags = 0;
    grn_rc rc;
    VALUE options, rb_host, rb_port;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;options);
    rb_grn_scan_options(options,
                        &quot;host&quot;, &amp;rb_host,
                        &quot;port&quot;, &amp;rb_port,
                        NULL);

    context = SELF(self);

    if (NIL_P(rb_host)) {
        host = &quot;localhost&quot;;
    } else {
        host = StringValueCStr(rb_host);
    }

    if (NIL_P(rb_port)) {
        port = 10041;
    } else {
        port = NUM2INT(rb_port);
    }

    rc = grn_ctx_connect(context, host, port, flags);
    rb_grn_context_check(context, self);
    rb_grn_rc_check(rc, self);

    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="create_database-instance_method">
  
    
      <span class="overload">#<strong>create_database</strong>  &#x21d2; <tt><span class='object_link'><a href="Database.html" title="Groonga::Database (class)">Groonga::Database</a></span></tt> </span>
    
      <span class="overload">#<strong>create_database</strong> {|database| ... } &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
      <span class="overload">#<strong>create_database</strong>(path)  &#x21d2; <tt><span class='object_link'><a href="Database.html" title="Groonga::Database (class)">Groonga::Database</a></span></tt> </span>
    
      <span class="overload">#<strong>create_database</strong>(path) {|database| ... } &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>This is convenience method. It wraps <span class='object_link'><a href="Database.html#create-class_method" title="Groonga::Database.create (method)">Database.create</a></span>
for the context.</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>create_database</strong>  &#x21d2; <tt><span class='object_link'><a href="Database.html" title="Groonga::Database (class)">Groonga::Database</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Creates a new temproary database for the context.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Creating a new temporary database</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_temporary_database'>temporary_database</span> <span class='op'>=</span> <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_create_database'>create_database</span></code></pre>
    
  </div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Database.html" title="Groonga::Database (class)">Groonga::Database</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A new temporary database.</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>create_database</strong> {|database| ... } &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Creates a new temproary database for the context. The database
is closed after the passed block is finished.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Creating a new temporary database with block</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_create_database'>create_database</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_temporary_database'>temporary_database</span><span class='op'>|</span>
  <span class='comment'># ...
</span><span class='kw'>end</span></code></pre>
    
  </div>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#database-instance_method" title="Groonga::Context#database (method)">database</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Yields a newly created temporary database
for the context. The database is available only in the
block.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>database</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Database.html" title="Groonga::Database (class)">Groonga::Database</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A newly created
temporary database for the context.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The returned value from the block is the
returned value from this method.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>Returned value from the block.</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>create_database</strong>(path)  &#x21d2; <tt><span class='object_link'><a href="Database.html" title="Groonga::Database (class)">Groonga::Database</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Creates a new persistent database for the context to the <em>path</em>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Creating a new persistent database to <em>“/tmp/db.groonga”</em></p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_database'>database</span> <span class='op'>=</span> <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_create_database'>create_database</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/tmp/db.groonga</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Database path for a new persistent
database.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Database.html" title="Groonga::Database (class)">Groonga::Database</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A new persistent database for the
context.</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>create_database</strong>(path) {|database| ... } &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Creates a new persistent database for the context to the
<em>path</em>. The database is closed after the passed block is
finished.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Creating a new persistent database to <em>“/tmp/db.groonga”</em> database with block</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_create_database'>create_database</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/tmp/db.groonga</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_persistent_database'>persistent_database</span><span class='op'>|</span>
  <span class='comment'># ...
</span><span class='kw'>end</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Database path for a new persistent
database.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="#database-instance_method" title="Groonga::Context#database (method)">database</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Yields a newly created persistent database
for the context. The database is available only in the
block.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>database</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Database.html" title="Groonga::Database (class)">Groonga::Database</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A newly created
persistent database for the context.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The returned value from the block is the
returned value from this method.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>Returned value from the block.</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


100
101
102
103
104
105
106
107</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/groonga/context.rb', line 100</span>

<span class='kw'>def</span> <span class='id identifier rubyid_create_database'>create_database</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='op'>=</span><span class='kw'>nil</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:context</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_path'>path</span>
    <span class='id identifier rubyid_options'>options</span><span class='lbracket'>[</span><span class='symbol'>:path</span><span class='rbracket'>]</span> <span class='op'>=</span> <span class='id identifier rubyid_path'>path</span>
  <span class='kw'>end</span>

  <span class='const'><span class='object_link'><a href="Database.html" title="Groonga::Database (class)">Database</a></span></span><span class='period'>.</span><span class='id identifier rubyid_create'><span class='object_link'><a href="Database.html#create-class_method" title="Groonga::Database.create (method)">create</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="database-instance_method">
  
    #<strong>database</strong>  &#x21d2; <tt><span class='object_link'><a href="Database.html" title="Groonga::Database (class)">Groonga::Database</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>コンテキストが使うデータベースを返す。</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Database.html" title="Groonga::Database (class)">Groonga::Database</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


752
753
754
755
756
757
758
759</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 752</span>

static VALUE
rb_grn_context_get_database (VALUE self)
{
    grn_ctx *context;

    context = SELF(self);
    return GRNDB2RVAL(context, grn_ctx_db(context), GRN_FALSE);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="encoding-instance_method">
  
    #<strong>encoding</strong>  &#x21d2; <tt><span class='object_link'><a href="Encoding.html" title="Groonga::Encoding (module)">Groonga::Encoding</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>コンテキストが使うエンコーディングを返す。</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Encoding.html" title="Groonga::Encoding (module)">Groonga::Encoding</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


564
565
566
567
568</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 564</span>

static VALUE
rb_grn_context_get_encoding (VALUE self)
{
    return GRNENCODING2RVAL(GRN_CTX_GET_ENCODING(SELF(self)));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="encoding=-instance_method">
  
    #<strong>encoding=</strong>(encoding)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>コンテキストが使うエンコーディングを設定する。エンコーディ
ングの指定のしかたは <span class='object_link'><a href="Encoding.html" title="Groonga::Encoding (module)">Encoding</a></span> を参照。</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


576
577
578
579
580
581
582
583
584
585
586
587</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 576</span>

static VALUE
rb_grn_context_set_encoding (VALUE self, VALUE rb_encoding)
{
    grn_ctx *context;
    grn_encoding encoding;

    context = SELF(self);
    encoding = RVAL2GRNENCODING(rb_encoding, NULL);
    GRN_CTX_SET_ENCODING(context, encoding);

    return rb_encoding;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="execute_command-instance_method">
  
    #<strong>execute_command</strong>(name, parameters = {})  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> 
  

  

  
</h3><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


169
170
171
172</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/groonga/context.rb', line 169</span>

<span class='kw'>def</span> <span class='id identifier rubyid_execute_command'>execute_command</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_parameters'>parameters</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_executor'>executor</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="Context/CommandExecutor.html" title="Groonga::Context::CommandExecutor (class)">CommandExecutor</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="Context/CommandExecutor.html#initialize-instance_method" title="Groonga::Context::CommandExecutor#initialize (method)">new</a></span></span><span class='lparen'>(</span><span class='kw'>self</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_executor'>executor</span><span class='period'>.</span><span class='id identifier rubyid_execute'>execute</span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_parameters'>parameters</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect-instance_method">
  
    #<strong>inspect</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>コンテキストの中身を人に見やすい文字列で返す。</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554
555
556</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 524</span>

static VALUE
rb_grn_context_inspect (VALUE self)
{
    VALUE inspected;
    grn_ctx *context;
    grn_obj *database;
    VALUE rb_database;

    context = SELF(self);

    inspected = rb_str_new_cstr(&quot;#&lt;&quot;);
    rb_str_concat(inspected, rb_inspect(rb_obj_class(self)));
    rb_str_cat2(inspected, &quot; &quot;);

    if (rb_grn_exited) {
      rb_str_cat2(inspected, &quot;(finished)&quot;);
    } else if (context) {
      rb_str_cat2(inspected, &quot;encoding: &lt;&quot;);
      rb_str_concat(inspected, rb_inspect(GRNENCODING2RVAL(context-&gt;encoding)));
      rb_str_cat2(inspected, &quot;&gt;, &quot;);

      rb_str_cat2(inspected, &quot;database: &lt;&quot;);
      database = grn_ctx_db(context);
      rb_database = GRNDB2RVAL(context, database, GRN_FALSE);
      rb_str_concat(inspected, rb_inspect(rb_database));
      rb_str_cat2(inspected, &quot;&gt;&quot;);
    } else {
      rb_str_cat2(inspected, &quot;(closed)&quot;);
    }

    rb_str_cat2(inspected, &quot;&gt;&quot;);
    return inspected;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="match_escalation_threshold-instance_method">
  
    #<strong>match_escalation_threshold</strong>  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>このコンテキストを使って検索したときに検索の挙動をエスカレー
ションする閾値を返します。
エスカレーションの詳細は
“groongaの検索の仕様に関するドキュメント”:http://groonga.org/docs/spec/search.html#match-escalation-threshold
を参照してください。</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


617
618
619
620
621</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 617</span>

static VALUE
rb_grn_context_get_match_escalation_threshold (VALUE self)
{
    return LL2NUM(grn_ctx_get_match_escalation_threshold(SELF(self)));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="match_escalation_threshold=-instance_method">
  
    #<strong>match_escalation_threshold=</strong>(match_escalation_threshold)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>このコンテキストを使って検索したときに検索の挙動をエスカレー
ションする閾値を設定します。
エスカレーションの詳細は
“groongaの検索の仕様に関するドキュメント”:http://groonga.org/docs/spec/search.html#match-escalation-threshold
を参照してください。</p>


  </div>
</div>
<div class="tags">
  
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


632
633
634
635
636
637
638
639
640
641</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 632</span>

static VALUE
rb_grn_context_set_match_escalation_threshold (VALUE self, VALUE threshold)
{
    grn_ctx *context;

    context = SELF(self);
    grn_ctx_set_match_escalation_threshold(context, NUM2LL(threshold));

    return threshold;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="object_created-instance_method">
  
    #<strong>object_created</strong>(object)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>



  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


344
345
346
347
348</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/groonga/context.rb', line 344</span>

<span class='kw'>def</span> <span class='id identifier rubyid_object_created'>object_created</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>if</span> <span class='ivar'>@memory_pools</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
  <span class='id identifier rubyid_memory_pool'>memory_pool</span> <span class='op'>=</span> <span class='ivar'>@memory_pools</span><span class='period'>.</span><span class='id identifier rubyid_last'>last</span>
  <span class='id identifier rubyid_memory_pool'>memory_pool</span><span class='period'>.</span><span class='id identifier rubyid_register'>register</span><span class='lparen'>(</span><span class='id identifier rubyid_object'>object</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="open_database-instance_method">
  
    #<strong>open_database</strong>(path, &amp;block)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>path</em> にある既存のデータベースを開く。ブロックを指定した場
合はブロックに開いたデータベースを渡し、ブロックを抜けると
きに閉じる。</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


26
27
28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/groonga/context.rb', line 26</span>

<span class='kw'>def</span> <span class='id identifier rubyid_open_database'>open_database</span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:context</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='rbrace'>}</span>

  <span class='const'><span class='object_link'><a href="Database.html" title="Groonga::Database (class)">Database</a></span></span><span class='period'>.</span><span class='id identifier rubyid_open'><span class='object_link'><a href="Database.html#open-class_method" title="Groonga::Database.open (method)">open</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_path'>path</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='comma'>,</span> <span class='op'>&amp;</span><span class='id identifier rubyid_block'>block</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="opened?-instance_method">
  
    #<strong>opened?</strong>(id)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Checks whether object with the ID is opened or not.</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    <p>Returns <code>true</code> if object with the <code>id</code> is opened,
<code>false</code> otherwise.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The ID to be checked</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> if object with the <code>id</code> is opened,
<code>false</code> otherwise.</p>
</div>
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


991
992
993
994
995
996
997
998
999
1000
1001
1002
1003</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 991</span>

static VALUE
rb_grn_context_is_opened (VALUE self, VALUE rb_id)
{
    grn_ctx *context;
    grn_id id;
    grn_bool is_opened;

    context = SELF(self);
    id = NUM2UINT(rb_id);
    is_opened = grn_ctx_is_opened(context, id);

    return CBOOL2RVAL(is_opened);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="pop_memory_pool-instance_method">
  
    #<strong>pop_memory_pool</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Pops the pushed memory pool.</p>


  </div>
</div>
<div class="tags">
  

  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="#push_memory_pool-instance_method" title="Groonga::Context#push_memory_pool (method)">#push_memory_pool</a></span></li>
    
  </ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>3.0.5</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


338
339
340
341</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/groonga/context.rb', line 338</span>

<span class='kw'>def</span> <span class='id identifier rubyid_pop_memory_pool'>pop_memory_pool</span>
  <span class='id identifier rubyid_memory_pool'>memory_pool</span> <span class='op'>=</span> <span class='ivar'>@memory_pools</span><span class='period'>.</span><span class='id identifier rubyid_pop'>pop</span>
  <span class='id identifier rubyid_memory_pool'>memory_pool</span><span class='period'>.</span><span class='id identifier rubyid_close'>close</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="push_memory_pool-instance_method">
  
    
      <span class="overload">#<strong>push_memory_pool</strong>  &#x21d2; <tt>void</tt> </span>
    
      <span class="overload">#<strong>push_memory_pool</strong>({}) { ... } &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Pushes a new memory pool to the context. Temporary objects that
are created between pushing a new memory pool and popping the
new memory pool are closed automatically when popping the new
memory pool.</p>

<p>It is useful for request and response style applications. These
style applications can close temporary objects between a request
and resopnse pair. There are some merits for closing temporary
objects explicilty rather than closing implicitly by GC:</p>

<ul>
  <li>Less memory consumption</li>
  <li>Faster</li>
</ul>

<p>The “less memory consumption” merit is caused by temporary
objects are closed each request and response pair. The max
memory consumption in these applications is the same as the max
memory consumption in a request and response pair. If temporary
objects are closed by GC, the max memory consumption in these
applications is the same as the max memory consumption between
the current GC and the next GC. These applications process many
request and response pairs during two GCs.</p>

<p>The “faster” merit is caused by reducing GC. You can reduce GC,
your application run faster because GC is a heavy process. You
can reduce GC because memory consumption is reduced.</p>

<p>You can nest <span class='object_link'><a href="#push_memory_pool-instance_method" title="Groonga::Context#push_memory_pool (method)">#push_memory_pool</a></span> and <span class='object_link'><a href="#pop_memory_pool-instance_method" title="Groonga::Context#pop_memory_pool (method)">#pop_memory_pool</a></span> pair.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Pushes a new memory pool with block</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_adults'>adults</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_push_memory_pool'>push_memory_pool</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_users'>users</span> <span class='op'>=</span> <span class='id identifier rubyid_context'>context</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Users</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_adults'>adults</span> <span class='op'>=</span> <span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_user'>user</span><span class='op'>|</span>
    <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_age'>age</span> <span class='op'>&gt;=</span> <span class='int'>20</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_adults'>adults</span><span class='period'>.</span><span class='id identifier rubyid_temporary?'>temporary?</span> <span class='comment'># =&gt; true
</span>  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_adults'>adults</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span>    <span class='comment'># =&gt; false
</span><span class='kw'>end</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_adults'>adults</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span>      <span class='comment'># =&gt; true</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Pushes a new memory pool without block</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_adults'>adults</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_push_memory_pool'>push_memory_pool</span>
<span class='id identifier rubyid_users'>users</span> <span class='op'>=</span> <span class='id identifier rubyid_context'>context</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Users</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='id identifier rubyid_adults'>adults</span> <span class='op'>=</span> <span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_user'>user</span><span class='op'>|</span>
  <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_age'>age</span> <span class='op'>&gt;=</span> <span class='int'>20</span>
<span class='kw'>end</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_adults'>adults</span><span class='period'>.</span><span class='id identifier rubyid_temporary?'>temporary?</span> <span class='comment'># =&gt; true
</span><span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_adults'>adults</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span>    <span class='comment'># =&gt; false
</span><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_pop_memory_pool'>pop_memory_pool</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_adults'>adults</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span>    <span class='comment'># =&gt; true</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Nesting push and pop pair</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_adults'>adults</span> <span class='op'>=</span> <span class='kw'>nil</span>
<span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_push_memory_pool'>push_memory_pool</span> <span class='kw'>do</span>
  <span class='id identifier rubyid_users'>users</span> <span class='op'>=</span> <span class='id identifier rubyid_context'>context</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Users</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_adults'>adults</span> <span class='op'>=</span> <span class='id identifier rubyid_users'>users</span><span class='period'>.</span><span class='id identifier rubyid_select'>select</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_user'>user</span><span class='op'>|</span>
    <span class='id identifier rubyid_user'>user</span><span class='period'>.</span><span class='id identifier rubyid_age'>age</span> <span class='op'>&gt;=</span> <span class='int'>20</span>
  <span class='kw'>end</span>
  <span class='id identifier rubyid_grouped_adults'>grouped_adults</span> <span class='op'>=</span> <span class='kw'>nil</span>
  <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_push_memory_pool'>push_memory_pool</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_grouped_adults'>grouped_adults</span> <span class='op'>=</span> <span class='id identifier rubyid_adults'>adults</span><span class='period'>.</span><span class='id identifier rubyid_group'>group</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>hobby</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_grouped_adults'>grouped_adults</span><span class='period'>.</span><span class='id identifier rubyid_temporary?'>temporary?</span> <span class='comment'># =&gt; true
</span>    <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_grouped_adults'>grouped_adults</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span>    <span class='comment'># =&gt; false
</span>  <span class='kw'>end</span>
  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_grouped_adults'>grouped_adults</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span>      <span class='comment'># =&gt; true
</span>  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_adults'>adults</span><span class='period'>.</span><span class='id identifier rubyid_temporary?'>temporary?</span>           <span class='comment'># =&gt; true
</span>  <span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_adults'>adults</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span>              <span class='comment'># =&gt; false
</span><span class='kw'>end</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_adults'>adults</span><span class='period'>.</span><span class='id identifier rubyid_closed?'>closed?</span>                <span class='comment'># =&gt; true</span></code></pre>
    
  </div>

  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>push_memory_pool</strong>  &#x21d2; <tt>void</tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Pushes a new memory pool to the context. You need to pop the
memory pool explicitly by yourself.</p>


  </div>
</div>
<div class="tags">
  

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>push_memory_pool</strong>({}) { ... } &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Closes temporary objects created in the given block
automatically.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>[]
Yields the block. Temporary objects created in the block
are closed automatically when the block is exited.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>It is the return value of this
method call.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The value returned by the block.</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>3.0.5</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


319
320
321
322
323
324
325
326
327
328
329</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/groonga/context.rb', line 319</span>

<span class='kw'>def</span> <span class='id identifier rubyid_push_memory_pool'>push_memory_pool</span>
  <span class='id identifier rubyid_memory_pool'>memory_pool</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="MemoryPool.html" title="Groonga::MemoryPool (class)">MemoryPool</a></span></span><span class='period'>.</span><span class='id identifier rubyid_new'><span class='object_link'><a href="MemoryPool.html#initialize-instance_method" title="Groonga::MemoryPool#initialize (method)">new</a></span></span>
  <span class='ivar'>@memory_pools</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_memory_pool'>memory_pool</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='kw'>unless</span> <span class='id identifier rubyid_block_given?'>block_given?</span>

  <span class='kw'>begin</span>
    <span class='kw'>yield</span>
  <span class='kw'>ensure</span>
    <span class='id identifier rubyid_pop_memory_pool'>pop_memory_pool</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="receive-instance_method">
  
    #<strong>receive</strong>  &#x21d2; <tt>[<span class='object_link'><a href="ID.html" title="Groonga::ID (module)">ID</a></span>, String]</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>groongaサーバからクエリ実行結果文字列を受信する。</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>[<span class='object_link'><a href="ID.html" title="Groonga::ID (module)">ID</a></span>, String]</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>クエリ実行結果</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


838
839
840
841
842
843
844
845
846
847
848
849
850
851
852
853
854
855
856
857
858</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 838</span>

static VALUE
rb_grn_context_receive (VALUE self)
{
    grn_ctx *context;
    char *result = NULL;
    unsigned result_size;
    VALUE rb_result;
    int flags = 0;
    unsigned int query_id;

    context = SELF(self);
    query_id = grn_ctx_recv(context, &amp;result, &amp;result_size, &amp;flags);
    if (result) {
        rb_result = rb_str_new(result, result_size);
    } else {
        rb_result = Qnil;
    }
    rb_grn_context_check(context, self);

    return rb_ary_new_from_args(2, UINT2NUM(query_id), rb_result);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="register_plugin-instance_method">
  
    #<strong>register_plugin</strong>(name_or_options)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>groongaのプラグインディレクトリにあるプラグイン <em>name</em>
を登録する。 <em>path</em> を指定するとプラグインディレクトリ以
外にあるプラグインを登録することができる。</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


112
113
114
115
116
117
118
119
120</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/groonga/context.rb', line 112</span>

<span class='kw'>def</span> <span class='id identifier rubyid_register_plugin'>register_plugin</span><span class='lparen'>(</span><span class='id identifier rubyid_name_or_options'>name_or_options</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:context</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='rbrace'>}</span>
  <span class='kw'>if</span> <span class='id identifier rubyid_name_or_options'>name_or_options</span><span class='period'>.</span><span class='id identifier rubyid_is_a?'>is_a?</span><span class='lparen'>(</span><span class='const'>String</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_name'>name</span> <span class='op'>=</span> <span class='id identifier rubyid_name_or_options'>name_or_options</span>
    <span class='const'><span class='object_link'><a href="Plugin.html" title="Groonga::Plugin (class)">Plugin</a></span></span><span class='period'>.</span><span class='id identifier rubyid_register'><span class='object_link'><a href="Plugin.html#register-class_method" title="Groonga::Plugin.register (method)">register</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_name'>name</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
  <span class='kw'>else</span>
    <span class='const'><span class='object_link'><a href="Plugin.html" title="Groonga::Plugin (class)">Plugin</a></span></span><span class='period'>.</span><span class='id identifier rubyid_register'><span class='object_link'><a href="Plugin.html#register-class_method" title="Groonga::Plugin.register (method)">register</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_name_or_options'>name_or_options</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="restore-instance_method">
  
    #<strong>restore</strong>(dumped_commands) {|command, response| ... } &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p><p>Restore commands dumped by “grndump” command.</p>

<p>If block is given, a response is yielded.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Restore dumped commands as a String object.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_dumped_commands'>dumped_commands</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dump.grn</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_restore'>restore</span><span class='lparen'>(</span><span class='id identifier rubyid_dumped_commands'>dumped_commands</span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Restore dumped commands from a File object.</p>
</div></p>
      
      <pre class="example code"><code><span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_open'>open</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dump.grn</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_file'>file</span><span class='op'>|</span>
  <span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_restore'>restore</span><span class='lparen'>(</span><span class='id identifier rubyid_file'>file</span><span class='rparen'>)</span>
<span class='kw'>end</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Restore dumped commands and reports result.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_dumped_commands'>dumped_commands</span> <span class='op'>=</span> <span class='const'>File</span><span class='period'>.</span><span class='id identifier rubyid_read'>read</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>dump.grn</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_restore'>restore</span><span class='lparen'>(</span><span class='id identifier rubyid_dumped_commands'>dumped_commands</span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_command'>command</span><span class='comma'>,</span> <span class='id identifier rubyid_response'>response</span><span class='op'>|</span>
  <span class='id identifier rubyid_puts'>puts</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_command'>command</span><span class='embexpr_end'>}</span><span class='tstring_content'> -&gt; </span><span class='embexpr_beg'>#{</span><span class='id identifier rubyid_response'>response</span><span class='embexpr_end'>}</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='kw'>end</span></code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>dumped_commands</span>
      
      
        <span class='type'>(<tt>#each_line</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>commands dumped by grndump.
It can be a String object or any objects like an IO object such
as a File object. It should have #each_line that iterates a
line.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>command</tt>, <tt>response</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Yields a sent command and its response if block is given.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>command</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A sent command.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>response</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>A response for a command.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


202
203
204
205
206
207
208
209
210
211
212
213
214
215
216
217
218
219
220
221
222
223
224
225
226
227
228</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/groonga/context.rb', line 202</span>

<span class='kw'>def</span> <span class='id identifier rubyid_restore'>restore</span><span class='lparen'>(</span><span class='id identifier rubyid_dumped_commands'>dumped_commands</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_end'>&quot;</span></span>
  <span class='id identifier rubyid_continued'>continued</span> <span class='op'>=</span> <span class='kw'>false</span>
  <span class='id identifier rubyid_dumped_commands'>dumped_commands</span><span class='period'>.</span><span class='id identifier rubyid_each_line'>each_line</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_line'>line</span><span class='op'>|</span>
    <span class='id identifier rubyid_line'>line</span> <span class='op'>=</span> <span class='id identifier rubyid_line'>line</span><span class='period'>.</span><span class='id identifier rubyid_chomp'>chomp</span>
    <span class='kw'>case</span> <span class='id identifier rubyid_line'>line</span>
    <span class='kw'>when</span> <span class='tstring'><span class='regexp_beg'>/</span><span class='tstring_content'>\\\z</span><span class='regexp_end'>/</span></span>
      <span class='id identifier rubyid_continued'>continued</span> <span class='op'>=</span> <span class='kw'>true</span>
      <span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='gvar'>$PREMATCH</span>
    <span class='kw'>else</span>
      <span class='id identifier rubyid_continued'>continued</span> <span class='op'>=</span> <span class='kw'>false</span>
      <span class='id identifier rubyid_buffer'>buffer</span> <span class='op'>&lt;&lt;</span> <span class='id identifier rubyid_line'>line</span>
      <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_buffer'>buffer</span><span class='rparen'>)</span>
      <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_receive'>receive</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
        <span class='id identifier rubyid_not_shared_command'>not_shared_command</span> <span class='op'>=</span> <span class='id identifier rubyid_continued'>continued</span> <span class='op'>?</span> <span class='id identifier rubyid_buffer'>buffer</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span> <span class='op'>:</span> <span class='id identifier rubyid_line'>line</span>
        <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_not_shared_command'>not_shared_command</span><span class='comma'>,</span> <span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span>
      <span class='kw'>end</span>
      <span class='id identifier rubyid_buffer'>buffer</span><span class='period'>.</span><span class='id identifier rubyid_clear'>clear</span>
    <span class='kw'>end</span>
  <span class='kw'>end</span>
  <span class='kw'>unless</span> <span class='id identifier rubyid_buffer'>buffer</span><span class='period'>.</span><span class='id identifier rubyid_empty?'>empty?</span>
    <span class='id identifier rubyid_send'>send</span><span class='lparen'>(</span><span class='id identifier rubyid_buffer'>buffer</span><span class='rparen'>)</span>
    <span class='id identifier rubyid__'>_</span><span class='comma'>,</span> <span class='id identifier rubyid_response'>response</span> <span class='op'>=</span> <span class='id identifier rubyid_receive'>receive</span>
    <span class='kw'>yield</span><span class='lparen'>(</span><span class='id identifier rubyid_buffer'>buffer</span><span class='period'>.</span><span class='id identifier rubyid_dup'>dup</span><span class='comma'>,</span> <span class='id identifier rubyid_response'>response</span><span class='rparen'>)</span> <span class='kw'>if</span> <span class='id identifier rubyid_block_given?'>block_given?</span>
  <span class='kw'>end</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="ruby_encoding-instance_method">
  
    #<strong>ruby_encoding</strong>  &#x21d2; <tt>::Encoding</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Gets the encoding used by the context as Ruby’s encoding object.</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>::Encoding</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the encoding used by the context</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>2.0.5</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


598
599
600
601
602
603
604
605</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 598</span>

static VALUE
rb_grn_context_get_ruby_encoding (VALUE self)
{
    grn_encoding encoding;

    encoding = GRN_CTX_GET_ENCODING(SELF(self));
    return rb_grn_encoding_to_ruby_encoding_object(encoding);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="select-instance_method">
  
    #<strong>select</strong>(table, options = {})  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>table</em> から指定した条件にマッチするレコードの値を取得
する。 <em>table</em> はテーブル名かテーブルオブジェクトを指定
する。</p>

<p><em>options</em> に指定できるキーは以下の通り。</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>::Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &mdash;
        <div class='inline'><p>The name and value
pairs. Omitted names are initialized as the default value.</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">output_columns</span>
          <span class="type">(<tt><span class='object_link'><a href="Array.html" title="Groonga::Array (class)">Array</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>The output_columns</p>

<p>値を取得するカラムを指定する。</p>
</div>
          
        </li>
      
        <li>
          <span class="name">XXX</span>
          <span class="type">(<tt><span class='object_link'><a href="Array.html" title="Groonga::Array (class)">Array</a></span></tt>)</span>
          <span class="default">
            
          </span>
          
            &mdash; <div class='inline'><p>TODO
TODO</p>
</div>
          
        </li>
      
    </ul>
  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


165
166
167</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/groonga/context.rb', line 165</span>

<span class='kw'>def</span> <span class='id identifier rubyid_select'>select</span><span class='lparen'>(</span><span class='id identifier rubyid_table'>table</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='op'>=</span><span class='lbrace'>{</span><span class='rbrace'>}</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_execute_command'>execute_command</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>select</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='lbrace'>{</span><span class='symbol'>:table</span> <span class='op'>=&gt;</span> <span class='id identifier rubyid_table'>table</span><span class='rbrace'>}</span><span class='period'>.</span><span class='id identifier rubyid_merge'>merge</span><span class='lparen'>(</span><span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="send-instance_method">
  
    #<strong>send</strong>(string)  &#x21d2; <tt>Integer</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>groongaサーバにクエリ文字列を送信する。</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>string</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>クエリ文字列</p>
</div>
      
    </li>
  
</ul>


</div>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>ID</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


815
816
817
818
819
820
821
822
823
824
825
826
827
828
829
830
831</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 815</span>

static VALUE
rb_grn_context_send (VALUE self, VALUE rb_string)
{
    grn_ctx *context;
    char *string;
    unsigned int string_size;
    int flags = 0;
    unsigned int query_id;

    context = SELF(self);
    string = StringValuePtr(rb_string);
    string_size = RSTRING_LEN(rb_string);
    query_id = grn_ctx_send(context, string, string_size, flags);
    rb_grn_context_check(context, self);

    return UINT2NUM(query_id);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="support_arrow?-instance_method">
  
    #<strong>support_arrow?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    <p>Returns <code>true</code> if Groonga supports Apache Arrow,
<code>false</code> otherwise.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> if Groonga supports Apache Arrow,
<code>false</code> otherwise.</p>
</div>
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


730
731
732
733
734
735
736
737
738
739
740
741
742
743
744</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 730</span>

static VALUE
rb_grn_context_support_arrow_p (VALUE self)
{
    VALUE rb_support_p;
    grn_ctx *context;
    grn_obj support_p;

    context = SELF(self);
    GRN_BOOL_INIT(&amp;support_p, 0);
    grn_obj_get_info(context, NULL, GRN_INFO_SUPPORT_ARROW, &amp;support_p);
    rb_support_p = CBOOL2RVAL(GRN_BOOL_VALUE(&amp;support_p));
    GRN_OBJ_FIN(context, &amp;support_p);

    return rb_support_p;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="support_lz4?-instance_method">
  
    #<strong>support_lz4?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>If Groonga supports LZ4 compression, it returns +true+,
otherwise it returns +false+.</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


686
687
688
689
690
691
692
693
694
695
696
697
698
699
700</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 686</span>

static VALUE
rb_grn_context_support_lz4_p (VALUE self)
{
    VALUE rb_support_p;
    grn_ctx *context;
    grn_obj support_p;

    context = SELF(self);
    GRN_BOOL_INIT(&amp;support_p, 0);
    grn_obj_get_info(context, NULL, GRN_INFO_SUPPORT_LZ4, &amp;support_p);
    rb_support_p = CBOOL2RVAL(GRN_BOOL_VALUE(&amp;support_p));
    GRN_OBJ_FIN(context, &amp;support_p);

    return rb_support_p;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="support_lzo?-instance_method">
  
    #<strong>support_lzo?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>If Groonga supports LZO compression, it returns +true+,
otherwise it returns +false+.</p>

<p>Groonga does not support LZO compression 4.0.7 or later.
This method always returns +false+.</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


674
675
676
677
678</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 674</span>

static VALUE
rb_grn_context_support_lzo_p (VALUE self)
{
    return Qfalse;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="support_zlib?-instance_method">
  
    #<strong>support_zlib?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>groongaがZlibサポート付きでビルドされていれば +true+ 、そう
でなければ +false+ を返す。</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


649
650
651
652
653
654
655
656
657
658
659
660
661
662
663</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 649</span>

static VALUE
rb_grn_context_support_zlib_p (VALUE self)
{
    VALUE rb_support_p;
    grn_ctx *context;
    grn_obj support_p;

    context = SELF(self);
    GRN_BOOL_INIT(&amp;support_p, 0);
    grn_obj_get_info(context, NULL, GRN_INFO_SUPPORT_ZLIB, &amp;support_p);
    rb_support_p = CBOOL2RVAL(GRN_BOOL_VALUE(&amp;support_p));
    GRN_OBJ_FIN(context, &amp;support_p);

    return rb_support_p;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="support_zstd?-instance_method">
  
    #<strong>support_zstd?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    <p>Returns <code>true</code> if Groonga supports Zstandard compression,
<code>false</code> otherwise.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><code>true</code> if Groonga supports Zstandard compression,
<code>false</code> otherwise.</p>
</div>
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


708
709
710
711
712
713
714
715
716
717
718
719
720
721
722</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-context.c', line 708</span>

static VALUE
rb_grn_context_support_zstd_p (VALUE self)
{
    VALUE rb_support_p;
    grn_ctx *context;
    grn_obj support_p;

    context = SELF(self);
    GRN_BOOL_INIT(&amp;support_p, 0);
    grn_obj_get_info(context, NULL, GRN_INFO_SUPPORT_ZSTD, &amp;support_p);
    rb_support_p = CBOOL2RVAL(GRN_BOOL_VALUE(&amp;support_p));
    GRN_OBJ_FIN(context, &amp;support_p);

    return rb_support_p;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="unregister_plugin-instance_method">
  
    
      <span class="overload">#<strong>unregister_plugin</strong>(name)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
      <span class="overload">#<strong>unregister_plugin</strong>(path)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Unregister a registered <code>name</code> plugin.</p>

<p>You can unregister <code>name</code> plugin by name if
<code>name</code> plugin is installed to plugin directory.</p>

<p>You can also specify the path of <code>name</code> plugin explicitly.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>Unregister a registerd plugin by name.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_register_plugin'>register_plugin</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>token_filters/stop_word</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_unregister_plugin'>unregister_plugin</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>token_filters/stop_word</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
      
        <p class="example_title"><div class='inline'><p>Unregister a registerd plugin by path.</p>
</div></p>
      
      <pre class="example code"><code><span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_register_plugin'>register_plugin</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>token_filters/stop_word</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_context'>context</span><span class='period'>.</span><span class='id identifier rubyid_unregister_plugin'>unregister_plugin</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>/usr/local/lib/groonga/plugins/token_filters/stop_word.so</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span></code></pre>
    
  </div>

  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>unregister_plugin</strong>(name)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Unregister a registerd plugin by name.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The plugin name.</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>unregister_plugin</strong>(path)  &#x21d2; <tt><span class='object_link'><a href="Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Unregister a registerd plugin by path.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>path</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The path to plugin.</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>

<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>5.0.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


148
149
150
151</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/groonga/context.rb', line 148</span>

<span class='kw'>def</span> <span class='id identifier rubyid_unregister_plugin'>unregister_plugin</span><span class='lparen'>(</span><span class='id identifier rubyid_name_or_path'>name_or_path</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_options'>options</span> <span class='op'>=</span> <span class='lbrace'>{</span><span class='symbol'>:context</span> <span class='op'>=&gt;</span> <span class='kw'>self</span><span class='rbrace'>}</span>
  <span class='const'><span class='object_link'><a href="Plugin.html" title="Groonga::Plugin (class)">Plugin</a></span></span><span class='period'>.</span><span class='id identifier rubyid_unregister'><span class='object_link'><a href="Plugin.html#unregister-class_method" title="Groonga::Plugin.unregister (method)">unregister</a></span></span><span class='lparen'>(</span><span class='id identifier rubyid_name_or_path'>name_or_path</span><span class='comma'>,</span> <span class='id identifier rubyid_options'>options</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
    </div>

    <div class="sponsors">
      <p id="sponsor-github">
        <a href="https://github.com/ranguba/">
          <img src="../../../github-logo.png" width="100" height="45" border="0" alt="The Ranguba project uses GitHub's git repositories." />
        </a>
      </p>
      <p id="sponsor-tango">
	<a href="http://tango.freedesktop.org/">
          <img width="120" height="53" border="0" alt="Tango Desktop Project's icons are used." src="../../../tango-logo.png" />
        </a>
      </p>
      <p id="sponsor-famfamfam">
	<a href="http://www.famfamfam.com/">
          <img width="120" height="18" border="0" alt="famfamfam.com's flags are used." src="../../../famfamfam-logo.png" />
        </a>
      </p>
    </div>

</div>
  </body>
</html>