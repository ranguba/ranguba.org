<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../../../../ranguba.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../favicon.ico" />
    <link rel="icon" href="../../../../favicon.png" />
    <title>
  Module: Groonga::Table::KeySupport
  
    &mdash; rroonga
  
 - ラングバ</title>


  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  pathId = "Groonga::Table::KeySupport";
  relpath = '../../';
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="../../class_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
<div class="header">
  <div class="title">
    <a href="../../../../ja/">
      <span class="title">
  Module: Groonga::Table::KeySupport
  
    &mdash; rroonga
  
</span>
      <span class="title-separator">-</span>
      <span class="title-project">ラングバ</span>
    </a>
  </div>
  <ul class="other-languages">
    <li id="other-language-english" lang="en" xml:lang="en"><a href="../../../../rroonga/en/Groonga/Table/KeySupport.html">English</a></li>
  </ul>
  <ul class="menu">
    <li id="menu-reference"><a href="../../../../rroonga/ja/">リファレンスマニュアル</a></li>
    <li id="menu-tutorial"><a href="../../../../rroonga/ja/file.tutorial.html">チュートリアル</a></li>
    <li id="menu-install"><a href="../../../../ja/#install-rroonga">インストール</a></li>
    <li id="menu-developer"><a href="../../../../ja/developer.html">開発者向け情報</a></li>
  </ul>
</div>

<div class="content">


      <div id="header">
        <div id="menu">
  
    <a href="../../alphabetical_index.html">Index (K)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Groonga.html" title="Groonga (module)">Groonga</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Table.html" title="Groonga::Table (class)">Table</a></span></span>
     &raquo; 
    <span class="title">KeySupport</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><h1>Module: Groonga::Table::KeySupport
  
  
  
</h1>
<div class="box_info">
  

  
  
  
  
  <dl>
      <dt>Includes:</dt>
      <dd><span class='object_link'><a href="../EncodingSupport.html" title="Groonga::EncodingSupport (module)">EncodingSupport</a></span></dd>
  </dl>
  
  

  
  <dl>
    <dt>Included in:</dt>
    <dd><span class='object_link'><a href="../DoubleArrayTrie.html" title="Groonga::DoubleArrayTrie (class)">DoubleArrayTrie</a></span>, <span class='object_link'><a href="../Hash.html" title="Groonga::Hash (class)">Hash</a></span>, <span class='object_link'><a href="../PatriciaTrie.html" title="Groonga::PatriciaTrie (class)">PatriciaTrie</a></span></dd>
  </dl>
  

  
  <dl>
    <dt>Defined in:</dt>
    <dd>ext/groonga/rb-grn-table-key-support.c<span class="defines">,<br />
  ext/groonga/rb-grn-table-key-support.c</span>
</dd>
  </dl>
  
</div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>主キーを持つテーブルである <span class='object_link'><a href="../Hash.html" title="Groonga::Hash (class)">Hash</a></span> と
<span class='object_link'><a href="../PatriciaTrie.html" title="Groonga::PatriciaTrie (class)">PatriciaTrie</a></span> に主キーの機能を提供するモジュール。</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small><a href="#" class="summary_toggle">collapse</a></small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#[]-instance_method" title="#[] (instance method)">#<strong>[]</strong>(key)  &#x21d2; Groonga::Record </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>table</em> の <em>key</em> に対応する <span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Record</a></span> を返す。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#[]=-instance_method" title="#[]= (instance method)">#<strong>[]=</strong>(key, values)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>table</em> の <em>key</em> に対応するカラム <em>column_name</em> の値を設定する。 <em>key</em> に対応するレコードがない場合は新しく作成される。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add-instance_method" title="#add (instance method)">#<strong>add</strong>(key, values = nil)  &#x21d2; Groonga::Recordまたはnil </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>主キーが <em>key</em> のレコード追加し、追加したレコードを返す。レ コードの追加に失敗した場合は +nil+ を返す。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#column_value-instance_method" title="#column_value (instance method)">#<strong>column_value</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>table</em> の <em>key</em> に対応するカラム <em>name</em> の値を設定する。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_tokenizer-instance_method" title="#default_tokenizer (instance method)">#<strong>default_tokenizer</strong>  &#x21d2; nilまたはGroonga::Procedure </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span> で使用するトークナイザを返す。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_tokenizer=-instance_method" title="#default_tokenizer= (instance method)">#<strong>default_tokenizer=</strong>(tokenizer)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span> で使用するトークナイザを設定する。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-instance_method" title="#delete (instance method)">#<strong>delete</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_key%3F-instance_method" title="#has_key? (instance method)">#<strong>has_key?</strong>(key)  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>テーブルに主キーが <em>key</em> のレコードがあるならtrueを返す。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#id-instance_method" title="#id (instance method)">#<strong>id</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>key</em> を指定しない場合はテーブルのIDを返す。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">#<strong>inspect</strong>  &#x21d2; String </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Inspects the table.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#key-instance_method" title="#key (instance method)">#<strong>key</strong>(id)  &#x21d2; 主キー </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>テーブルの <em>id</em> に対応する主キーを返す。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalize_key%3F-instance_method" title="#normalize_key? (instance method)">#<strong>normalize_key?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>キーを正規化する場合は +true+ 、正規化しない場合は +false+ を返 す。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalizer-instance_method" title="#normalizer (instance method)">#<strong>normalizer</strong>  &#x21d2; nil, Groonga::Procedure </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the normalizer that is used by <span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalizer=-instance_method" title="#normalizer= (instance method)">#<strong>normalizer=</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Specifies the normalizer used by <span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#reindex-instance_method" title="#reindex (instance method)">#<strong>reindex</strong>  &#x21d2; void </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Recreates all index columns in the table.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_column_value-instance_method" title="#set_column_value (instance method)">#<strong>set_column_value</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>table</em> の <em>key</em> に対応するカラム <em>name</em> の値を設定する。 <em>key</em> に対応するレコードがない場合は新しく作成される。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_value-instance_method" title="#set_value (instance method)">#<strong>set_value</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>table</em> の <em>id</em> または <em>key</em> に対応する値を <em>value</em> に設定する。 既存の値は上書きされる。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#support_key%3F-instance_method" title="#support_key? (instance method)">#<strong>support_key?</strong>  &#x21d2; Boolean </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>テーブルでキーを使えるなら +true+ 、使えないなら +false+ を返 す。キーを使えないテーブルは <span class='object_link'><a href="../Array.html" title="Groonga::Array (class)">Array</a></span> だけ。.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#token_filters-instance_method" title="#token_filters (instance method)">#<strong>token_filters</strong>  &#x21d2; ::Array&lt;Groonga::Procedure&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the token filters that are used by <span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#token_filters=-instance_method" title="#token_filters= (instance method)">#<strong>token_filters=</strong>(token_filters)  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Sets token filters that used in <span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span>.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tokenize-instance_method" title="#tokenize (instance method)">#<strong>tokenize</strong>(string, options = {})  &#x21d2; ::Array&lt;Groonga::Record&gt; </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Tokenize a string using the table as lexicon.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#value-instance_method" title="#value (instance method)">#<strong>value</strong>  &#x21d2; Object </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>table</em> の <em>id</em> または <em>key</em> に対応する値を返す。.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../EncodingSupport.html" title="Groonga::EncodingSupport (module)">EncodingSupport</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../EncodingSupport.html#encoding-instance_method" title="Groonga::EncodingSupport#encoding (method)">#encoding</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="[]-instance_method">
  
    #<strong>[]</strong>(key)  &#x21d2; <tt><span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Groonga::Record</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>table</em> の <em>key</em> に対応する <span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Record</a></span> を返す。</p>

<p>0.9.0から値ではなく <span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Record</a></span> を返すようになった。</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Groonga::Record</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


458
459
460
461
462
463
464
465
466
467
468
469</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 458</span>

static VALUE
rb_grn_table_key_support_array_reference (VALUE self, VALUE rb_key)
{
    grn_id id;

    id = rb_grn_table_key_support_get(self, rb_key);
    if (id == GRN_ID_NIL) {
        return Qnil;
    } else {
        return rb_grn_record_new(self, id, Qnil);
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="[]=-instance_method">
  
    #<strong>[]=</strong>(key, values)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>table</em> の <em>key</em> に対応するカラム <em>column_name</em> の値を設定する。
<em>key</em> に対応するレコードがない場合は新しく作成される。</p>

<p>0.9.0から値ではなくカラムの値を設定するようになった。</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>values</span>
      
      
        <span class='type'>(<tt>::Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>keyに対応させるカラムの値。{ :column_name =&gt; value, … }の形で設定する。</p>
</div>
      
    </li>
  
</ul>


</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


510
511
512
513
514
515
516
517
518
519
520
521
522
523
524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 510</span>

static VALUE
rb_grn_table_key_support_array_set (VALUE self, VALUE rb_key, VALUE rb_values)
{
    grn_id id;
    SetValueData data;
    grn_ctx *context;
    grn_obj *table;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    id = rb_grn_table_key_support_add_raw(self, rb_key, NULL);

    if (id == GRN_ID_NIL) {
        rb_raise(rb_eGrnError,
                 &quot;failed to add record: %s&quot;,
                 rb_grn_inspect(rb_ary_new_from_args(3,
                                                     self,
                                                     rb_key, rb_values)));
    }

    data.self = self;
    data.id = id;
    data.table = table;
    data.rb_grn_object.context = context;
    rb_iterate(rb_each, rb_values, set_value, (VALUE)&amp;data);

    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add-instance_method">
  
    #<strong>add</strong>(key, values = nil)  &#x21d2; <tt><span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Groonga::Record</a></span>またはnil</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>主キーが <em>key</em> のレコード追加し、追加したレコードを返す。レ
コードの追加に失敗した場合は +nil+ を返す。</p>

<p>すでに同じキーのレコードが存在する場合は追加せずに同じレ
コードを返す。追加されたかどうかは
<span class='object_link'><a href="../Record.html#added%3F-instance_method" title="Groonga::Record#added? (method)">Record#added?</a></span> で調べることができる。 +true+ を返
したら追加されたということを示す。</p>

<p><em>values</em> にはレコードのカラムに設定する値を指定する。省略
した場合または +nil+ を指定した場合はカラムは設定しない。カ
ラムの値は @=&gt; 値1, :カラム名2 =&gt; 値2,
…@ と指定する。</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Groonga::Record</a></span>またはnil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


248
249
250
251
252
253
254
255
256
257
258
259
260
261
262
263
264
265
266</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 248</span>

static VALUE
rb_grn_table_key_support_add (int argc, VALUE *argv, VALUE self)
{
    grn_id id;
    VALUE key, values;
    int added = GRN_FALSE;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;key, &amp;values);
    id = rb_grn_table_key_support_add_raw(self, key, &amp;added);
    if (GRN_ID_NIL == id) {
        return Qnil;
    } else {
        if (added) {
            return rb_grn_record_new_added(self, id, values);
        } else {
            return rb_grn_record_new(self, id, values);
        }
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="column_value-instance_method">
  
    
      <span class="overload">#<strong>column_value</strong>(key, name)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
      <span class="overload">#<strong>column_value</strong>(id, name, : id=&gt;true)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>table</em> の <em>key</em> に対応するカラム <em>name</em> の値を設定する。</p>

<p>TODO: <em>key</em> に対応するレコードがない場合は例外？</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


591
592
593
594
595
596
597
598
599
600
601
602
603
604
605
606
607
608
609
610
611
612
613
614
615
616</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 591</span>

static VALUE
rb_grn_table_key_support_get_column_value (int argc, VALUE *argv, VALUE self)
{
    grn_id id;
    VALUE rb_key, rb_id_or_key, rb_name, rb_options;

    rb_scan_args(argc, argv, &quot;21&quot;, &amp;rb_id_or_key, &amp;rb_name, &amp;rb_options);
    if (!NIL_P(rb_options)) {
        VALUE rb_option_id;
        rb_grn_scan_options(rb_options,
                            &quot;id&quot;, &amp;rb_option_id,
                            NULL);
        if (RVAL2CBOOL(rb_option_id)) {
            VALUE rb_id = rb_id_or_key;
            return rb_grn_table_get_column_value(self, rb_id, rb_name);
        }
    }

    rb_key = rb_id_or_key;
    id = rb_grn_table_key_support_get(self, rb_key);
    if (id == GRN_ID_NIL) {
        return Qnil;
    }

    return rb_grn_table_get_column_value_raw(self, id, rb_name);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_tokenizer-instance_method">
  
    #<strong>default_tokenizer</strong>  &#x21d2; <tt>nilまたは<span class='object_link'><a href="../Procedure.html" title="Groonga::Procedure (class)">Groonga::Procedure</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span> で使用するトークナイザを返す。</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nilまたは<span class='object_link'><a href="../Procedure.html" title="Groonga::Procedure (class)">Groonga::Procedure</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


752
753
754
755
756
757
758
759
760
761
762
763
764
765
766
767
768
769</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 752</span>

static VALUE
rb_grn_table_key_support_get_default_tokenizer (VALUE self)
{
    grn_ctx *context = NULL;
    grn_obj *table;
    grn_obj *tokenizer = NULL;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    tokenizer = grn_obj_get_info(context, table, GRN_INFO_DEFAULT_TOKENIZER,
                                 NULL);
    rb_grn_context_check(context, self);

    return GRNOBJECT2RVAL(Qnil, context, tokenizer, GRN_FALSE);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_tokenizer=-instance_method">
  
    #<strong>default_tokenizer=</strong>(tokenizer)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span> で使用するトークナイザを設定する。</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='comment'># 2-gramを使用。
</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_default_tokenizer'>default_tokenizer</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TokenBigram</span><span class='tstring_end'>&quot;</span></span>
<span class='comment'># オブジェクトで指定
</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_default_tokenizer'>default_tokenizer</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Groonga.html" title="Groonga (module)">Groonga</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Context.html" title="Groonga::Context (class)">Context</a></span></span><span class='period'>.</span><span class='id identifier rubyid_default'><span class='object_link'><a href="../Context.html#default-class_method" title="Groonga::Context.default (method)">default</a></span></span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TokenBigram</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='comment'># オブジェクトIDで指定
</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_default_tokenizer'>default_tokenizer</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Groonga.html" title="Groonga (module)">Groonga</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Type.html" title="Groonga::Type (class)">Type</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Type.html#BIGRAM-constant" title="Groonga::Type::BIGRAM (constant)">BIGRAM</a></span></span>
<span class='comment'># N-gram用のトークナイザを使うときはGroonga::IndexColumn
</span><span class='comment'># には自動的に:with_section =&gt; trueが指定される。
</span><span class='id identifier rubyid_index'>index</span> <span class='op'>=</span> <span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_define_index_column'>define_index_column</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>blog_content</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Blogs</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                  <span class='symbol'>:source</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>content</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_index'>index</span> <span class='comment'># -&gt; #&lt;Groonga::IndexColumn ... flags: &lt;WITH_POSITION|...&gt;&gt;
</span>
<span class='comment'># MeCabを使用
</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_default_tokenizer'>default_tokenizer</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TokenMecab</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
  </div>

  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


792
793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809
810
811
812</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 792</span>

static VALUE
rb_grn_table_key_support_set_default_tokenizer (VALUE self, VALUE rb_tokenizer)
{
    grn_ctx *context;
    grn_obj *table;
    grn_obj *tokenizer;
    grn_rc rc;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    tokenizer = RVAL2GRNOBJECT(rb_tokenizer, &amp;context);
    rc = grn_obj_set_info(context, table,
                          GRN_INFO_DEFAULT_TOKENIZER, tokenizer);
    rb_grn_context_check(context, self);
    rb_grn_rc_check(rc, self);

    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete-instance_method">
  
    
      <span class="overload">#<strong>delete</strong>(id, : id=&gt;true)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
      <span class="overload">#<strong>delete</strong>(key)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
      <span class="overload">#<strong>delete</strong> {|record| ... } &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>delete</strong>(id, : id=&gt;true)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Delete a record that has ID @id@.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The ID of delete target record.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>void</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>delete</strong>(key)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Delete a record that has key @key@.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The key of delete target record.</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>void</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>delete</strong> {|record| ... } &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    <p>Returns void</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>record</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>TODO: See #select.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>record</span>
      
      
        <span class='type'>(<tt>Groonga::RecodExpressionBuilder</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>TODO: See #select.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>Groonga::ExpressionBuilder</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>TODO: See #select.</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>void</p>
</div>
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


429
430
431
432
433
434
435
436
437
438
439
440
441
442
443
444
445
446
447
448</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 429</span>

static VALUE
rb_grn_table_key_support_delete (int argc, VALUE *argv, VALUE self)
{
    VALUE rb_id_or_key, rb_options;
    VALUE rb_option_id;

    if (rb_block_given_p()) {
        return rb_grn_table_delete_by_expression(self);
    }

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;rb_id_or_key, &amp;rb_options);
    rb_grn_scan_options(rb_options,
                        &quot;id&quot;, &amp;rb_option_id,
                        NULL);
    if (RVAL2CBOOL(rb_option_id)) {
        return rb_grn_table_delete_by_id(self, rb_id_or_key);
    } else {
        return rb_grn_table_key_support_delete_by_key(self, rb_id_or_key);
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_key?-instance_method">
  
    #<strong>has_key?</strong>(key)  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>テーブルに主キーが <em>key</em> のレコードがあるならtrueを返す。</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


361
362
363
364
365
366
367
368
369
370
371
372
373
374
375
376
377
378</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 361</span>

static VALUE
rb_grn_table_key_support_has_key (VALUE self, VALUE rb_key)
{
    grn_ctx *context;
    grn_obj *table, *key, *domain;
    grn_id id, domain_id;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         &amp;key, &amp;domain_id, &amp;domain,
                                         NULL, NULL, NULL,
                                         NULL);

    GRN_BULK_REWIND(key);
    RVAL2GRNKEY(rb_key, context, key, domain_id, domain, self);
    id = grn_table_get(context, table, GRN_BULK_HEAD(key), GRN_BULK_VSIZE(key));

    return id == GRN_ID_NIL ? Qfalse : Qtrue;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="id-instance_method">
  
    
      <span class="overload">#<strong>id</strong>  &#x21d2; <tt>テーブル<span class='object_link'><a href="../ID.html" title="Groonga::ID (module)">ID</a></span></tt> </span>
    
      <span class="overload">#<strong>id</strong>(key)  &#x21d2; <tt>レコード<span class='object_link'><a href="../ID.html" title="Groonga::ID (module)">ID</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>key</em> を指定しない場合はテーブルのIDを返す。</p>

<p><em>key</em> を指定した場合はテーブルの <em>key</em> に対応するレコードの
IDを返す。</p>


  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>id</strong>  &#x21d2; <tt>テーブル<span class='object_link'><a href="../ID.html" title="Groonga::ID (module)">ID</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>テーブル<span class='object_link'><a href="../ID.html" title="Groonga::ID (module)">ID</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>id</strong>(key)  &#x21d2; <tt>レコード<span class='object_link'><a href="../ID.html" title="Groonga::ID (module)">ID</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>レコード<span class='object_link'><a href="../ID.html" title="Groonga::ID (module)">ID</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


300
301
302
303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 300</span>

static VALUE
rb_grn_table_key_support_get_id (int argc, VALUE *argv, VALUE self)
{
    VALUE rb_key;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;rb_key);
    if (NIL_P(rb_key)) {
        return rb_grn_object_get_id(self);
    } else {
        grn_id id;

        id = rb_grn_table_key_support_get(self, rb_key);
        if (id == GRN_ID_NIL) {
            return Qnil;
        } else {
            return UINT2NUM(id);
        }
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect-instance_method">
  
    #<strong>inspect</strong>  &#x21d2; <tt>String</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Inspects the table.</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    <p>Returns the inspected string.</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the inspected string.</p>
</div>
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


194
195
196
197
198
199
200
201
202
203
204
205
206
207</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 194</span>

static VALUE
rb_grn_table_key_support_inspect (VALUE self)
{
    VALUE inspected;

    inspected = rb_str_new_cstr(&quot;&quot;);
    rb_grn_object_inspect_header(self, inspected);
    rb_grn_object_inspect_content(self, inspected);
    rb_grn_table_inspect_content(self, inspected);
    rb_grn_table_key_support_inspect_content(self, inspected);
    rb_grn_object_inspect_footer(self, inspected);

    return inspected;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="key-instance_method">
  
    #<strong>key</strong>(id)  &#x21d2; <tt>主キー</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>テーブルの <em>id</em> に対応する主キーを返す。</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>主キー</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


326
327
328
329
330
331
332
333
334
335
336
337
338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 326</span>

static VALUE
rb_grn_table_key_support_get_key (VALUE self, VALUE rb_id)
{
    grn_ctx *context;
    grn_obj *table, *key;
    grn_id id;
    int key_size;
    VALUE rb_key;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         &amp;key, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    id = NUM2UINT(rb_id);
    GRN_BULK_REWIND(key);
    key_size = grn_table_get_key(context, table, id,
                                 GRN_BULK_HEAD(key), GRN_BULK_VSIZE(key));
    if (key_size == 0)
        return Qnil;

    if (GRN_BULK_VSIZE(key) &lt; key_size) {
        grn_bulk_reserve(context, key, key_size);
        grn_table_get_key(context, table, id, GRN_BULK_HEAD(key), key_size);
    }

    rb_key = GRNKEY2RVAL(context, GRN_BULK_HEAD(key), key_size, table, self);
    return rb_key;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="normalize_key?-instance_method">
  
    #<strong>normalize_key?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>キーを正規化する場合は +true+ 、正規化しない場合は +false+ を返
す。</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


948
949
950
951
952
953
954
955</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 948</span>

static VALUE
rb_grn_table_key_support_normalize_key_p (VALUE self)
{
    VALUE normalizer;

    normalizer = rb_grn_table_key_support_get_normalizer(self);
    return CBOOL2RVAL(!NIL_P(normalizer));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="normalizer-instance_method">
  
    #<strong>normalizer</strong>  &#x21d2; <tt>nil</tt>, <tt><span class='object_link'><a href="../Procedure.html" title="Groonga::Procedure (class)">Groonga::Procedure</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the normalizer that is used by <span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>, <tt><span class='object_link'><a href="../Procedure.html" title="Groonga::Procedure (class)">Groonga::Procedure</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


883
884
885
886
887
888
889
890
891
892
893
894
895
896
897
898
899</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 883</span>

static VALUE
rb_grn_table_key_support_get_normalizer (VALUE self)
{
    grn_ctx *context = NULL;
    grn_obj *table;
    grn_obj *normalizer = NULL;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    normalizer = grn_obj_get_info(context, table, GRN_INFO_NORMALIZER, NULL);
    rb_grn_context_check(context, self);

    return GRNOBJECT2RVAL(Qnil, context, normalizer, GRN_FALSE);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="normalizer=-instance_method">
  
    
      <span class="overload">#<strong>normalizer=</strong>(name)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
      <span class="overload">#<strong>normalizer=</strong>(normalizer)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
      <span class="overload">#<strong>normalizer=</strong>(normalizer)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Specifies the normalizer used by <span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='comment'># Uses NFKC normalizer.
</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_normalizer'>normalizer</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NormalizerNFKC51</span><span class='tstring_end'>&quot;</span></span>
<span class='comment'># Specifies normalizer object.
</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_normalizer'>normalizer</span> <span class='op'>=</span> <span class='const'><span class='object_link'><a href="../../Groonga.html" title="Groonga (module)">Groonga</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Context.html" title="Groonga::Context (class)">Context</a></span></span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NormalizerNFKC51</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='comment'># Uses auto normalizer that is a normalizer for backward compatibility.
</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_normalizer'>normalizer</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TNormalizerAuto</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
  </div>

  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">#<strong>normalizer=</strong>(name)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Set a nomalizer named @name@.</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>normalizer=</strong>(normalizer)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>normalizer</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Procedure.html" title="Groonga::Procedure (class)">Groonga::Procedure</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Set the normalizer object.</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">#<strong>normalizer=</strong>(normalizer)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
        <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>normalizer</span>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Unset normalizer.</p>
</div>
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


921
922
923
924
925
926
927
928
929
930
931
932
933
934
935
936
937
938
939
940</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 921</span>

static VALUE
rb_grn_table_key_support_set_normalizer (VALUE self, VALUE rb_normalizer)
{
    grn_ctx *context;
    grn_obj *table;
    grn_obj *normalizer;
    grn_rc rc;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    normalizer = RVAL2GRNOBJECT(rb_normalizer, &amp;context);
    rc = grn_obj_set_info(context, table, GRN_INFO_NORMALIZER, normalizer);
    rb_grn_context_check(context, self);
    rb_grn_rc_check(rc, self);

    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reindex-instance_method">
  
    #<strong>reindex</strong>  &#x21d2; <tt>void</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Recreates all index columns in the table.</p>

<p>This method is useful when you have any broken index columns in
the table. You don’t need to specify each index column. But this
method spends more time rather than you specify only reindex
needed index columns.</p>

<p>You can use <span class='object_link'><a href="../Database.html#reindex-instance_method" title="Groonga::Database#reindex (method)">Database#reindex</a></span> to recreate all index
columns in a database.</p>

<p>You can use <span class='object_link'><a href="../FixSizeColumn.html#reindex-instance_method" title="Groonga::FixSizeColumn#reindex (method)">FixSizeColumn#reindex</a></span> or
<span class='object_link'><a href="../VariableSizeColumn.html#reindex-instance_method" title="Groonga::VariableSizeColumn#reindex (method)">VariableSizeColumn#reindex</a></span> to specify reindex target
index columns. They use index columns of the data column as
reindex target index columns.</p>

<p>You can use <span class='object_link'><a href="../IndexColumn.html#reindex-instance_method" title="Groonga::IndexColumn#reindex (method)">IndexColumn#reindex</a></span> to specify the reindex
target index column.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"><div class='inline'><p>How to recreate all index columns in the table</p>
</div></p>
      
      <pre class="example code"><code><span class='const'><span class='object_link'><a href="../../Groonga.html" title="Groonga (module)">Groonga</a></span></span><span class='op'>::</span><span class='const'><span class='object_link'><a href="../Schema.html" title="Groonga::Schema (class)">Schema</a></span></span><span class='period'>.</span><span class='id identifier rubyid_define'><span class='object_link'><a href="../Schema.html#define-class_method" title="Groonga::Schema.define (method)">define</a></span></span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_schema'>schema</span><span class='op'>|</span>
  <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_create_table'>create_table</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Memos</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_table'>table</span><span class='op'>|</span>
    <span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_short_text'>short_text</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>title</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_text'>text</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>content</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_create_table'>create_table</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BigramTerms</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                      <span class='symbol'>:type</span> <span class='op'>=&gt;</span> <span class='symbol'>:patricia_trie</span><span class='comma'>,</span>
                      <span class='symbol'>:key_type</span> <span class='op'>=&gt;</span> <span class='symbol'>:short_text</span><span class='comma'>,</span>
                      <span class='symbol'>:normalizer</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NormalizerAuto</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                      <span class='symbol'>:default_tokenizer</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TokenBigram</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_table'>table</span><span class='op'>|</span>
    <span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Memos.title</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Memos.content</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>

  <span class='id identifier rubyid_schema'>schema</span><span class='period'>.</span><span class='id identifier rubyid_create_table'>create_table</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>MeCabTerms</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                      <span class='symbol'>:type</span> <span class='op'>=&gt;</span> <span class='symbol'>:patricia_trie</span><span class='comma'>,</span>
                      <span class='symbol'>:key_type</span> <span class='op'>=&gt;</span> <span class='symbol'>:short_text</span><span class='comma'>,</span>
                      <span class='symbol'>:normalizer</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NormalizerAuto</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                      <span class='symbol'>:default_tokenizer</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TokenMecab</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_table'>table</span><span class='op'>|</span>
    <span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Memos.title</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
    <span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_index'>index</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Memos.content</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
  <span class='kw'>end</span>
<span class='kw'>end</span>

<span class='const'><span class='object_link'><a href="../../Groonga.html" title="Groonga (module)">Groonga</a></span></span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>BigramTerms</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_reindex'>reindex</span>
<span class='comment'># They are called:
</span><span class='comment'>#   Groonga[&quot;BigramTerms.Memos_title&quot;].reindex
</span><span class='comment'>#   Groonga[&quot;BigramTerms.Memos_content&quot;].reindex
</span><span class='comment'>#
</span><span class='comment'># They aren&#39;t called:
</span><span class='comment'>#   Groonga[&quot;MeCabTerms.Memos_title&quot;].reindex
</span><span class='comment'>#   Groonga[&quot;MeCabTerms.Memos_content&quot;].reindex</span></code></pre>
    
  </div>

  <div class="docstring">
  <div class="discussion">
    <p class="note returns_void">This method returns an undefined value.</p>


  </div>
</div>
<div class="tags">
  

</div>


  <p class="tag_title">See Also:</p>
  <ul class="see">
    
      <li><span class='object_link'><a href="../Database.html#reindex-instance_method" title="Groonga::Database#reindex (method)">Database#reindex</a></span></li>
    
      <li><span class='object_link'><a href="../FixSizeColumn.html#reindex-instance_method" title="Groonga::FixSizeColumn#reindex (method)">FixSizeColumn#reindex</a></span></li>
    
      <li><span class='object_link'><a href="../VariableSizeColumn.html#reindex-instance_method" title="Groonga::VariableSizeColumn#reindex (method)">VariableSizeColumn#reindex</a></span></li>
    
      <li><span class='object_link'><a href="../IndexColumn.html#reindex-instance_method" title="Groonga::IndexColumn#reindex (method)">IndexColumn#reindex</a></span></li>
    
  </ul>
<p class="tag_title">Since:</p>
<ul class="since">
  
    <li>
      
      
      
      
        
        <div class='inline'><p>5.1.1</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


1092
1093
1094
1095
1096
1097
1098
1099
1100
1101
1102
1103
1104
1105
1106
1107
1108
1109</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 1092</span>

static VALUE
rb_grn_table_key_support_reindex (VALUE self)
{
    grn_rc rc;
    grn_ctx *context;
    grn_obj *table;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    rc = grn_obj_reindex(context, table);
    rb_grn_context_check(context, self);
    rb_grn_rc_check(rc, self);

    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_column_value-instance_method">
  
    
      <span class="overload">#<strong>set_column_value</strong>(key, name, value)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
      <span class="overload">#<strong>set_column_value</strong>(id, name, value, {: id=&gt;true})  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>table</em> の <em>key</em> に対応するカラム <em>name</em> の値を設定する。
<em>key</em> に対応するレコードがない場合は新しく作成される。</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


549
550
551
552
553
554
555
556
557
558
559
560
561
562
563
564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 549</span>

static VALUE
rb_grn_table_key_support_set_column_value (int argc, VALUE *argv, VALUE self)
{
    grn_id id;
    VALUE rb_key, rb_id_or_key, rb_name, rb_value, rb_options;

    rb_scan_args(argc, argv, &quot;31&quot;,
                 &amp;rb_id_or_key, &amp;rb_name, &amp;rb_value, &amp;rb_options);
    if (!NIL_P(rb_options)) {
        VALUE rb_option_id;
        rb_grn_scan_options(rb_options,
                            &quot;id&quot;, &amp;rb_option_id,
                            NULL);
        if (RVAL2CBOOL(rb_option_id)) {
            VALUE rb_id = rb_id_or_key;
            return rb_grn_table_set_column_value(self, rb_id, rb_name, rb_value);
        }
    }

    rb_key = rb_id_or_key;
    id = rb_grn_table_key_support_add_raw(self, rb_key, NULL);
    if (id == GRN_ID_NIL) {
        rb_raise(rb_eGrnError,
                 &quot;failed to add record: %s&quot;,
                 rb_grn_inspect(rb_ary_new_from_args(4,
                                                     self,
                                                     rb_key,
                                                     rb_name,
                                                     rb_value)));
    }

    return rb_grn_table_set_column_value_raw(self, id, rb_name, rb_value);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_value-instance_method">
  
    
      <span class="overload">#<strong>set_value</strong>(id, value, : id=&gt;true)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
      <span class="overload">#<strong>set_value</strong>(key, value)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>table</em> の <em>id</em> または <em>key</em> に対応する値を <em>value</em> に設定する。
既存の値は上書きされる。</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


718
719
720
721
722
723
724
725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742
743
744</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 718</span>

static VALUE
rb_grn_table_key_support_set_value (int argc, VALUE *argv, VALUE self)
{
    VALUE rb_id_or_key, rb_value, rb_options;
    grn_bool use_key;

    rb_scan_args(argc, argv, &quot;21&quot;, &amp;rb_id_or_key, &amp;rb_value, &amp;rb_options);

    if (NIL_P(rb_options)) {
        use_key = GRN_TRUE;
    } else {
        VALUE rb_option_id;

        rb_grn_scan_options(rb_options,
                            &quot;id&quot;, &amp;rb_option_id,
                            NULL);
        use_key = !RVAL2CBOOL(rb_option_id);
    }

    if (use_key) {
        return rb_grn_table_key_support_set_value_by_key(self,
                                                         rb_id_or_key,
                                                         rb_value);
    } else {
        return rb_grn_table_set_value(self, rb_id_or_key, rb_value);
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="support_key?-instance_method">
  
    #<strong>support_key?</strong>  &#x21d2; <tt>Boolean</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>テーブルでキーを使えるなら +true+ 、使えないなら +false+ を返
す。キーを使えないテーブルは <span class='object_link'><a href="../Array.html" title="Groonga::Array (class)">Array</a></span> だけ。</p>


  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


963
964
965
966
967
968
969
970
971
972
973</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 963</span>

static VALUE
rb_grn_table_key_support_support_key_p (VALUE self)
{
    grn_obj *table;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, NULL,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);
    return table-&gt;header.domain == GRN_ID_NIL ? Qfalse : Qtrue;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="token_filters-instance_method">
  
    #<strong>token_filters</strong>  &#x21d2; <tt>::Array&lt;<span class='object_link'><a href="../Procedure.html" title="Groonga::Procedure (class)">Groonga::Procedure</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the token filters that are used by <span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>::Array&lt;<span class='object_link'><a href="../Procedure.html" title="Groonga::Procedure (class)">Groonga::Procedure</a></span>&gt;</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


820
821
822
823
824
825
826
827
828
829
830
831
832
833
834
835
836
837
838
839
840</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 820</span>

static VALUE
rb_grn_table_key_support_get_token_filters (VALUE self)
{
    grn_ctx *context = NULL;
    grn_obj *table;
    grn_obj token_filters;
    VALUE rb_token_filters;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    GRN_PTR_INIT(&amp;token_filters, GRN_VECTOR, GRN_ID_NIL);
    grn_obj_get_info(context, table, GRN_INFO_TOKEN_FILTERS,
                     &amp;token_filters);
    rb_token_filters = GRNPVECTOR2RVAL(context, &amp;token_filters);
    rb_grn_context_check(context, self);

    return rb_token_filters;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="token_filters=-instance_method">
  
    #<strong>token_filters=</strong>(token_filters)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Sets token filters that used in <span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span>.</p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='comment'># Use &quot;TokenFilterStem&quot; and &quot;TokenfilterStopWord&quot;
</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_token_filters'>token_filters</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TokenFilterStem</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TokenFilterStopWord</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span></code></pre>
    
  </div>

  <div class="docstring">
  <div class="discussion">
    


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>token_filters</span>
      
      
        <span class='type'>(<tt>::Array&lt;String&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Token filter names.</p>
</div>
      
    </li>
  
</ul>


</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


852
853
854
855
856
857
858
859
860
861
862
863
864
865
866
867
868
869
870
871
872
873
874
875</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 852</span>

static VALUE
rb_grn_table_key_support_set_token_filters (VALUE self,
                                            VALUE rb_token_filters)
{
    grn_ctx *context;
    grn_obj *table;
    grn_obj token_filters;
    grn_rc rc;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    GRN_PTR_INIT(&amp;token_filters, GRN_OBJ_VECTOR, GRN_ID_NIL);
    RVAL2GRNPVECTOR(rb_token_filters, context, &amp;token_filters);
    rc = grn_obj_set_info(context, table,
                          GRN_INFO_TOKEN_FILTERS, &amp;token_filters);
    grn_obj_unlink(context, &amp;token_filters);
    rb_grn_context_check(context, self);
    rb_grn_rc_check(rc, self);

    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tokenize-instance_method">
  
    #<strong>tokenize</strong>(string, options = {})  &#x21d2; <tt>::Array&lt;<span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Groonga::Record</a></span>&gt;</tt> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Tokenize a string using the table as lexicon.</p>


  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    <p>Returns Tokenized tokens.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>string</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The string to be tokenized.</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>::Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:add</span>
          <span class="type">(<tt>Bool</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>true</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>Adds a new token to the table if true.
Returned tokens include the new token. Otherwise, a new token is
just ignored.</p>
</div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>::Array&lt;<span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Groonga::Record</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Tokenized tokens.</p>
</div>
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


986
987
988
989
990
991
992
993
994
995
996
997
998
999
1000
1001
1002
1003
1004
1005
1006
1007
1008
1009
1010
1011
1012
1013
1014
1015
1016
1017
1018
1019
1020
1021
1022
1023
1024
1025
1026</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 986</span>

static VALUE
rb_grn_table_key_support_tokenize (int argc, VALUE *argv, VALUE self)
{
    VALUE rb_string, rb_add_p;
    VALUE rb_options;
    VALUE rb_tokens = Qnil;
    grn_ctx *context;
    grn_obj *table;
    char *string;
    int string_size;
    grn_bool add_p;
    grn_obj tokens;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;rb_string, &amp;rb_options);
    rb_grn_scan_options(rb_options,
                        &quot;add&quot;, &amp;rb_add_p,
                        NULL);
    if (NIL_P(rb_add_p)) {
        rb_add_p = Qtrue;
    }

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    string = StringValueCStr(rb_string);
    string_size = RSTRING_LEN(rb_string);

    add_p = RVAL2CBOOL(rb_add_p);

    GRN_RECORD_INIT(&amp;tokens, GRN_OBJ_VECTOR, grn_obj_id(context, table));
    grn_table_tokenize(context, table, string, string_size, &amp;tokens, add_p);
    if (context-&gt;rc == GRN_SUCCESS) {
        rb_tokens = GRNUVECTOR2RVAL(context, &amp;tokens, table, self);
    }
    grn_obj_unlink(context, &amp;tokens);
    rb_grn_context_check(context, self);

    return rb_tokens;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="value-instance_method">
  
    
      <span class="overload">#<strong>value</strong>(id, : id=&gt;true)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
      <span class="overload">#<strong>value</strong>(key)  &#x21d2; <tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt> </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>table</em> の <em>id</em> または <em>key</em> に対応する値を返す。</p>


  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p><em>id</em> もしくは <em>key</em> に対応する値</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


648
649
650
651
652
653
654
655
656
657
658
659
660
661
662
663
664
665
666
667
668
669
670
671
672</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 648</span>

static VALUE
rb_grn_table_key_support_get_value (int argc, VALUE *argv, VALUE self)
{
    VALUE rb_id_or_key, rb_options;
    grn_bool use_key;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;rb_id_or_key, &amp;rb_options);

    if (NIL_P(rb_options)) {
        use_key = GRN_TRUE;
    } else {
        VALUE rb_option_id;

        rb_grn_scan_options(rb_options,
                            &quot;id&quot;, &amp;rb_option_id,
                            NULL);
        use_key = !RVAL2CBOOL(rb_option_id);
    }

    if (use_key) {
        return rb_grn_table_key_support_get_value_by_key(self, rb_id_or_key);
    } else {
        return rb_grn_table_get_value(self, rb_id_or_key);
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

      <div id="footer">
  Generated on Thu Jan 12 23:11:40 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.9.7 (ruby-2.3.0).
</div>

    
    </div>

    <div class="sponsors">
      <p id="sponsor-github">
        <a href="http://github.com/ranguba/">
          <img src="../../../../github-logo.png" width="100" height="45" border="0" alt="ラングバプロジェクトはGitHubにホスティングしてもらっています。" />
        </a>
      </p>
      <p id="sponsor-tango">
	<a href="http://tango.freedesktop.org/">
          <img width="120" height="53" border="0" alt="Tango Desktop Projectのアイコンを利用しています。" src="../../../../tango-logo.png" />
        </a>
      </p>
    </div>

</div>
  </body>
</html>