<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../../../ranguba.css" type="text/css" />
    <link rel="shortcut icon" href="../../../../favicon.ico" />
    <link rel="icon" href="../../../../favicon.png" />
    <title>
  Module: Groonga::Table::KeySupport
  
    &mdash; rroonga
  
 - Ranguba</title>


  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!Groonga/Table/KeySupport.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
<div class="header">
  <div class="title">
    <a href="../../../../">
      <span class="title">
  Module: Groonga::Table::KeySupport
  
    &mdash; rroonga
  
</span>
      <span class="title-separator">-</span>
      <span class="title-project">Ranguba</span>
    </a>
  </div>
  <ul class="other-languages">
    <li id="other-language-japanese" lang="ja" xml:lang="ja"><a href="../../../../rroonga/ja/Groonga/Table/KeySupport.html">日本語</a></li>
  </ul>
  <ul class="menu">
    <li id="menu-reference"><a href="../../../../rroonga/en/">Reference Manual</a></li>
    <li id="menu-tutorial"><a href="../../../../rroonga/en/file.tutorial.html">Tutorial</a></li>
    <li id="menu-install"><a href="../../../../#install-rroonga">Install</a></li>
    <li id="menu-developer"><a href="../../../../developer.html">Developer</a></li>
  </ul>
</div>

<div class="content">


    <div id="header">
      <div id="menu">
  
    <a href="../../alphabetical_index.html">Index (K)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../Groonga.html" title="Groonga (module)">Groonga</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Table.html" title="Groonga::Table (class)">Table</a></span></span>
     &raquo; 
    <span class="title">KeySupport</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: Groonga::Table::KeySupport
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
      <dt class="r1">Includes:</dt>
      <dd class="r1"><span class='object_link'><a href="../EncodingSupport.html" title="Groonga::EncodingSupport (module)">EncodingSupport</a></span></dd>
      
    
  
  
    <dt class="r2">Included in:</dt>
    <dd class="r2"><span class='object_link'><a href="../DoubleArrayTrie.html" title="Groonga::DoubleArrayTrie (class)">DoubleArrayTrie</a></span>, <span class='object_link'><a href="../Hash.html" title="Groonga::Hash (class)">Hash</a></span>, <span class='object_link'><a href="../PatriciaTrie.html" title="Groonga::PatriciaTrie (class)">PatriciaTrie</a></span></dd>
    
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">ext/groonga/rb-grn-table-key-support.c<span class="defines">,<br />
  ext/groonga/rb-grn-table-key-support.c</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>主キーを持つテーブルである <span class='object_link'><a href="../Hash.html" title="Groonga::Hash (class)">Hash</a></span> と
<span class='object_link'><a href="../PatriciaTrie.html" title="Groonga::PatriciaTrie (class)">PatriciaTrie</a></span> に主キーの機能を提供するモジュール。</p>

  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D-instance_method" title="#[] (instance method)">- (Groonga::Record) <strong>[]</strong>(key) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>table</em> の <em>key</em> に対応する <span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Record</a></span> を返す。.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#%5B%5D%3D-instance_method" title="#[]= (instance method)">- (Object) <strong>[]=</strong>(key, values) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>table</em> の <em>key</em> に対応するカラム <em>column_name</em> の値を設定する。 <em>key</em> に対応するレコードがない場合は新しく作成される。.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add-instance_method" title="#add (instance method)">- (Groonga::Recordまたはnil) <strong>add</strong>(key, values = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>主キーが <em>key</em> のレコード追加し、追加したレコードを返す。レ コードの追加に失敗した場合は <ins>nil</ins> を返す。.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#column_value-instance_method" title="#column_value (instance method)">- (Object) <strong>column_value</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>table</em> の <em>key</em> に対応するカラム <em>name</em> の値を設定する。.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_tokenizer-instance_method" title="#default_tokenizer (instance method)">- (nilまたはGroonga::Procedure) <strong>default_tokenizer</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span> で使用するトークナイザを返す。.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#default_tokenizer%3D-instance_method" title="#default_tokenizer= (instance method)">- (Object) <strong>default_tokenizer=</strong>(tokenizer) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span> で使用するトークナイザを設定する。.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#delete-instance_method" title="#delete (instance method)">- (Object) <strong>delete</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#has_key%3F-instance_method" title="#has_key? (instance method)">- (Boolean) <strong>has_key?</strong>(key) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>テーブルに主キーが <em>key</em> のレコードがあるならtrueを返す。.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#id-instance_method" title="#id (instance method)">- (Object) <strong>id</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>key</em> を指定しない場合はテーブルのIDを返す。.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#inspect-instance_method" title="#inspect (instance method)">- (String) <strong>inspect</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Inspects the table.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#key-instance_method" title="#key (instance method)">- (主キー) <strong>key</strong>(id) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>テーブルの <em>id</em> に対応する主キーを返す。.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalize_key%3F-instance_method" title="#normalize_key? (instance method)">- (Boolean) <strong>normalize_key?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>キーを正規化する場合は <ins>true</ins> 、正規化しない場合は <ins>false</ins> を返 す。.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalizer-instance_method" title="#normalizer (instance method)">- (nil, Groonga::Procedure) <strong>normalizer</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Returns the normalizer that is used by <span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span>.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#normalizer%3D-instance_method" title="#normalizer= (instance method)">- (Object) <strong>normalizer=</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Specifies the normalizer used by <span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span>.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_column_value-instance_method" title="#set_column_value (instance method)">- (Object) <strong>set_column_value</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>table</em> の <em>key</em> に対応するカラム <em>name</em> の値を設定する。 <em>key</em> に対応するレコードがない場合は新しく作成される。.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#set_value-instance_method" title="#set_value (instance method)">- (Object) <strong>set_value</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>table</em> の <em>id</em> または <em>key</em> に対応する値を <em>value</em> に設定する。 既存の値は上書きされる。.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#support_key%3F-instance_method" title="#support_key? (instance method)">- (Boolean) <strong>support_key?</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>テーブルでキーを使えるなら <ins>true</ins> 、使えないなら <ins>false</ins> を返 す。キーを使えないテーブルは <span class='object_link'><a href="../Array.html" title="Groonga::Array (class)">Array</a></span> だけ。.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#tokenize-instance_method" title="#tokenize (instance method)">- (::Array&lt;Groonga::Record&gt;) <strong>tokenize</strong>(string, options = {}) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p>Tokenize a string using the table as lexicon.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#value-instance_method" title="#value (instance method)">- (Object) <strong>value</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'><p><em>table</em> の <em>id</em> または <em>key</em> に対応する値を返す。.</p></div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class='object_link'><a href="../EncodingSupport.html" title="Groonga::EncodingSupport (module)">EncodingSupport</a></span></h3>
  <p class="inherited"><span class='object_link'><a href="../EncodingSupport.html#encoding-instance_method" title="Groonga::EncodingSupport#encoding (method)">#encoding</a></span></p>


  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="[]-instance_method">
  
    - (<tt><span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Groonga::Record</a></span></tt>) <strong>[]</strong>(key) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>table</em> の <em>key</em> に対応する <span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Record</a></span> を返す。</p>
<p>0.9.0から値ではなく <span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Record</a></span> を返すようになった。</p>

  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Groonga::Record</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


435
436
437
438
439
440
441
442
443
444
445
446</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 435</span>

static VALUE
rb_grn_table_key_support_array_reference (VALUE self, VALUE rb_key)
{
    grn_id id;

    id = rb_grn_table_key_support_get(self, rb_key);
    if (id == GRN_ID_NIL) {
        return Qnil;
    } else {
        return rb_grn_record_new(self, id, Qnil);
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="[]=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>[]=</strong>(key, values) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>table</em> の <em>key</em> に対応するカラム <em>column_name</em> の値を設定する。
<em>key</em> に対応するレコードがない場合は新しく作成される。</p>
<p>0.9.0から値ではなくカラムの値を設定するようになった。</p>

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>values</span>
      
      
        <span class='type'>(<tt>::Hash</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>keyに対応させるカラムの値。{ :column_name =&gt; value, &#8230; }の形で設定する。</p></div>
      
    </li>
  
</ul>


</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


487
488
489
490
491
492
493
494
495
496
497
498
499
500
501
502
503
504
505
506
507
508
509
510
511
512
513
514
515</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 487</span>

static VALUE
rb_grn_table_key_support_array_set (VALUE self, VALUE rb_key, VALUE rb_values)
{
    grn_id id;
    SetValueData data;
    grn_ctx *context;
    grn_obj *table;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    id = rb_grn_table_key_support_add_raw(self, rb_key, NULL);

    if (id == GRN_ID_NIL) {
        rb_raise(rb_eGrnError,
                 &quot;failed to add record: %s&quot;,
                 rb_grn_inspect(rb_ary_new3(3, self, rb_key, rb_values)));
    }

    data.self = self;
    data.id = id;
    data.table = table;
    data.rb_grn_object.context = context;
    rb_iterate(rb_each, rb_values, set_value, (VALUE)&amp;data);

    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="add-instance_method">
  
    - (<tt><span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Groonga::Record</a></span>またはnil</tt>) <strong>add</strong>(key, values = nil) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>主キーが <em>key</em> のレコード追加し、追加したレコードを返す。レ
コードの追加に失敗した場合は <ins>nil</ins> を返す。</p>
<p>すでに同じキーのレコードが存在する場合は追加せずに同じレ
コードを返す。追加されたかどうかは
<span class='object_link'><a href="../Record.html#added%3F-instance_method" title="Groonga::Record#added? (method)">Record#added?</a></span> で調べることができる。 <ins>true</ins> を返
したら追加されたということを示す。</p>
<p><em>values</em> にはレコードのカラムに設定する値を指定する。省略
した場合または <ins>nil</ins> を指定した場合はカラムは設定しない。カ
ラムの値は <code>{:カラム名1 =&gt; 値1, :カラム名2 =&gt; 値2,
...}</code> と指定する。</p>

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Groonga::Record</a></span>またはnil</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


225
226
227
228
229
230
231
232
233
234
235
236
237
238
239
240
241
242
243</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 225</span>

static VALUE
rb_grn_table_key_support_add (int argc, VALUE *argv, VALUE self)
{
    grn_id id;
    VALUE key, values;
    int added = GRN_FALSE;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;key, &amp;values);
    id = rb_grn_table_key_support_add_raw(self, key, &amp;added);
    if (GRN_ID_NIL == id) {
        return Qnil;
    } else {
        if (added) {
            return rb_grn_record_new_added(self, id, values);
        } else {
            return rb_grn_record_new(self, id, values);
        }
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="column_value-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>column_value</strong>(key, name) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>column_value</strong>(id, name, :id = &gt;true) </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>table</em> の <em>key</em> に対応するカラム <em>name</em> の値を設定する。</p>
<p><span class="caps">TODO</span>: <em>key</em> に対応するレコードがない場合は例外？</p>

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


564
565
566
567
568
569
570
571
572
573
574
575
576
577
578
579
580
581
582
583
584
585
586
587
588
589</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 564</span>

static VALUE
rb_grn_table_key_support_get_column_value (int argc, VALUE *argv, VALUE self)
{
    grn_id id;
    VALUE rb_key, rb_id_or_key, rb_name, rb_options;

    rb_scan_args(argc, argv, &quot;21&quot;, &amp;rb_id_or_key, &amp;rb_name, &amp;rb_options);
    if (!NIL_P(rb_options)) {
        VALUE rb_option_id;
        rb_grn_scan_options(rb_options,
                            &quot;id&quot;, &amp;rb_option_id,
                            NULL);
        if (RVAL2CBOOL(rb_option_id)) {
            VALUE rb_id = rb_id_or_key;
            return rb_grn_table_get_column_value(self, rb_id, rb_name);
        }
    }

    rb_key = rb_id_or_key;
    id = rb_grn_table_key_support_get(self, rb_key);
    if (id == GRN_ID_NIL) {
        return Qnil;
    }

    return rb_grn_table_get_column_value_raw(self, id, rb_name);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_tokenizer-instance_method">
  
    - (<tt>nilまたは<span class='object_link'><a href="../Procedure.html" title="Groonga::Procedure (class)">Groonga::Procedure</a></span></tt>) <strong>default_tokenizer</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span> で使用するトークナイザを返す。</p>

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nilまたは<span class='object_link'><a href="../Procedure.html" title="Groonga::Procedure (class)">Groonga::Procedure</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


725
726
727
728
729
730
731
732
733
734
735
736
737
738
739
740
741
742</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 725</span>

static VALUE
rb_grn_table_key_support_get_default_tokenizer (VALUE self)
{
    grn_ctx *context = NULL;
    grn_obj *table;
    grn_obj *tokenizer = NULL;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    tokenizer = grn_obj_get_info(context, table, GRN_INFO_DEFAULT_TOKENIZER,
                                 NULL);
    rb_grn_context_check(context, self);

    return GRNOBJECT2RVAL(Qnil, context, tokenizer, GRN_FALSE);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="default_tokenizer=-instance_method">
  
    - (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>default_tokenizer=</strong>(tokenizer) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span> で使用するトークナイザを設定する。</p>

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='comment'># 2-gramを使用。
</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_default_tokenizer'>default_tokenizer</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TokenBigram</span><span class='tstring_end'>&quot;</span></span>
<span class='comment'># オブジェクトで指定
</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_default_tokenizer'>default_tokenizer</span> <span class='op'>=</span> <span class='const'>Groonga</span><span class='op'>::</span><span class='const'>Context</span><span class='period'>.</span><span class='id identifier rubyid_default'>default</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TokenBigram</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='comment'># オブジェクトIDで指定
</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_default_tokenizer'>default_tokenizer</span> <span class='op'>=</span> <span class='const'>Groonga</span><span class='op'>::</span><span class='const'>Type</span><span class='op'>::</span><span class='const'>BIGRAM</span>
<span class='comment'># N-gram用のトークナイザを使うときはGroonga::IndexColumn
</span><span class='comment'># には自動的に:with_section =&gt; trueが指定される。
</span><span class='id identifier rubyid_index'>index</span> <span class='op'>=</span> <span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_define_index_column'>define_index_column</span><span class='lparen'>(</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>blog_content</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>Blogs</span><span class='tstring_end'>&quot;</span></span><span class='comma'>,</span>
                                  <span class='symbol'>:source</span> <span class='op'>=&gt;</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>content</span><span class='tstring_end'>&quot;</span></span><span class='rparen'>)</span>
<span class='id identifier rubyid_p'>p</span> <span class='id identifier rubyid_index'>index</span> <span class='comment'># -&gt; #&lt;Groonga::IndexColumn ... flags: &lt;WITH_POSITION|...&gt;&gt;
</span>
<span class='comment'># MeCabを使用
</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_default_tokenizer'>default_tokenizer</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TokenMecab</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
  </div>

  


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


765
766
767
768
769
770
771
772
773
774
775
776
777
778
779
780
781
782
783
784
785</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 765</span>

static VALUE
rb_grn_table_key_support_set_default_tokenizer (VALUE self, VALUE rb_tokenizer)
{
    grn_ctx *context;
    grn_obj *table;
    grn_obj *tokenizer;
    grn_rc rc;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    tokenizer = RVAL2GRNOBJECT(rb_tokenizer, &amp;context);
    rc = grn_obj_set_info(context, table,
                          GRN_INFO_DEFAULT_TOKENIZER, tokenizer);
    rb_grn_context_check(context, self);
    rb_grn_rc_check(rc, self);

    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="delete-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>delete</strong>(id, :id = &gt;true) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>delete</strong>(key) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>delete</strong> {|record| ... }</span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>delete</strong>(id, :id = &gt;true) </span>
        <div class="docstring">
  <div class="discussion">
    <p>Delete a record that has ID <code>id</code>.</p>

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>id</span>
      
      
        <span class='type'>(<tt>Integer</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The ID of delete target record.</p></div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>void</p></div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>delete</strong>(key) </span>
        <div class="docstring">
  <div class="discussion">
    <p>Delete a record that has key <code>key</code>.</p>

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>key</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The key of delete target record.</p></div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>void</p></div>
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>delete</strong> {|record| ... }</span>
        <div class="docstring">
  <div class="discussion">
    <p>Returns void</p>

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Yields:</p>
<ul class="yield">
  
    <li>
      
      
        <span class='type'>(<tt>record</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><span class="caps">TODO</span>: See #select.</p></div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Parameters:</p>
<ul class="yieldparam">
  
    <li>
      
        <span class='name'>record</span>
      
      
        <span class='type'>(<tt>Groonga::RecodExpressionBuilder</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><span class="caps">TODO</span>: See #select.</p></div>
      
    </li>
  
</ul>
<p class="tag_title">Yield Returns:</p>
<ul class="yieldreturn">
  
    <li>
      
      
        <span class='type'>(<tt>Groonga::ExpressionBuilder</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p><span class="caps">TODO</span>: See #select.</p></div>
      
    </li>
  
</ul>
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p>void</p></div>
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


406
407
408
409
410
411
412
413
414
415
416
417
418
419
420
421
422
423
424
425</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 406</span>

static VALUE
rb_grn_table_key_support_delete (int argc, VALUE *argv, VALUE self)
{
    VALUE rb_id_or_key, rb_options;
    VALUE rb_option_id;

    if (rb_block_given_p()) {
        return rb_grn_table_delete_by_expression(self);
    }

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;rb_id_or_key, &amp;rb_options);
    rb_grn_scan_options(rb_options,
                        &quot;id&quot;, &amp;rb_option_id,
                        NULL);
    if (RVAL2CBOOL(rb_option_id)) {
        return rb_grn_table_delete_by_id(self, rb_id_or_key);
    } else {
        return rb_grn_table_key_support_delete_by_key(self, rb_id_or_key);
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="has_key?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>has_key?</strong>(key) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>テーブルに主キーが <em>key</em> のレコードがあるならtrueを返す。</p>

  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


338
339
340
341
342
343
344
345
346
347
348
349
350
351
352
353
354
355</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 338</span>

static VALUE
rb_grn_table_key_support_has_key (VALUE self, VALUE rb_key)
{
    grn_ctx *context;
    grn_obj *table, *key, *domain;
    grn_id id, domain_id;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         &amp;key, &amp;domain_id, &amp;domain,
                                         NULL, NULL, NULL,
                                         NULL);

    GRN_BULK_REWIND(key);
    RVAL2GRNKEY(rb_key, context, key, domain_id, domain, self);
    id = grn_table_get(context, table, GRN_BULK_HEAD(key), GRN_BULK_VSIZE(key));

    return id == GRN_ID_NIL ? Qfalse : Qtrue;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="id-instance_method">
  
    
      <span class="overload">- (<tt>テーブルID</tt>) <strong>id</strong> </span>
    
      <span class="overload">- (<tt>レコードID</tt>) <strong>id</strong>(key) </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>key</em> を指定しない場合はテーブルのIDを返す。</p>
<p><em>key</em> を指定した場合はテーブルの <em>key</em> に対応するレコードの
IDを返す。</p>

  </div>
</div>
<div class="tags">
  
  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>テーブルID</tt>) <strong>id</strong> </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>テーブルID</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt>レコードID</tt>) <strong>id</strong>(key) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>レコードID</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


277
278
279
280
281
282
283
284
285
286
287
288
289
290
291
292
293
294
295</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 277</span>

static VALUE
rb_grn_table_key_support_get_id (int argc, VALUE *argv, VALUE self)
{
    VALUE rb_key;

    rb_scan_args(argc, argv, &quot;01&quot;, &amp;rb_key);
    if (NIL_P(rb_key)) {
        return rb_grn_object_get_id(self);
    } else {
        grn_id id;

        id = rb_grn_table_key_support_get(self, rb_key);
        if (id == GRN_ID_NIL) {
            return Qnil;
        } else {
            return UINT2NUM(id);
        }
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="inspect-instance_method">
  
    - (<tt>String</tt>) <strong>inspect</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Inspects the table.</p>

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    <p>Returns the inspected string.</p>

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>the inspected string.</p></div>
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


171
172
173
174
175
176
177
178
179
180
181
182
183
184</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 171</span>

static VALUE
rb_grn_table_key_support_inspect (VALUE self)
{
    VALUE inspected;

    inspected = rb_str_new2(&quot;&quot;);
    rb_grn_object_inspect_header(self, inspected);
    rb_grn_object_inspect_content(self, inspected);
    rb_grn_table_inspect_content(self, inspected);
    rb_grn_table_key_support_inspect_content(self, inspected);
    rb_grn_object_inspect_footer(self, inspected);

    return inspected;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="key-instance_method">
  
    - (<tt>主キー</tt>) <strong>key</strong>(id) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>テーブルの <em>id</em> に対応する主キーを返す。</p>

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>主キー</tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


303
304
305
306
307
308
309
310
311
312
313
314
315
316
317
318
319
320
321
322
323
324
325
326
327
328
329
330
331</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 303</span>

static VALUE
rb_grn_table_key_support_get_key (VALUE self, VALUE rb_id)
{
    grn_ctx *context;
    grn_obj *table, *key;
    grn_id id;
    int key_size;
    VALUE rb_key;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         &amp;key, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    id = NUM2UINT(rb_id);
    GRN_BULK_REWIND(key);
    key_size = grn_table_get_key(context, table, id,
                                 GRN_BULK_HEAD(key), GRN_BULK_VSIZE(key));
    if (key_size == 0)
        return Qnil;

    if (GRN_BULK_VSIZE(key) &lt; key_size) {
        grn_bulk_reserve(context, key, key_size);
        grn_table_get_key(context, table, id, GRN_BULK_HEAD(key), key_size);
    }

    rb_key = GRNKEY2RVAL(context, GRN_BULK_HEAD(key), key_size, table, self);
    return rb_key;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="normalize_key?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>normalize_key?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>キーを正規化する場合は <ins>true</ins> 、正規化しない場合は <ins>false</ins> を返
す。</p>

  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


858
859
860
861
862
863
864
865</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 858</span>

static VALUE
rb_grn_table_key_support_normalize_key_p (VALUE self)
{
    VALUE normalizer;

    normalizer = rb_grn_table_key_support_get_normalizer(self);
    return CBOOL2RVAL(!NIL_P(normalizer));
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="normalizer-instance_method">
  
    - (<tt>nil</tt>, <tt><span class='object_link'><a href="../Procedure.html" title="Groonga::Procedure (class)">Groonga::Procedure</a></span></tt>) <strong>normalizer</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Returns the normalizer that is used by <span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span>.</p>

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>nil</tt>, <tt><span class='object_link'><a href="../Procedure.html" title="Groonga::Procedure (class)">Groonga::Procedure</a></span></tt>)</span>
      
      
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


793
794
795
796
797
798
799
800
801
802
803
804
805
806
807
808
809</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 793</span>

static VALUE
rb_grn_table_key_support_get_normalizer (VALUE self)
{
    grn_ctx *context = NULL;
    grn_obj *table;
    grn_obj *normalizer = NULL;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    normalizer = grn_obj_get_info(context, table, GRN_INFO_NORMALIZER, NULL);
    rb_grn_context_check(context, self);

    return GRNOBJECT2RVAL(Qnil, context, normalizer, GRN_FALSE);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="normalizer=-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>normalizer=</strong>(name) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>normalizer=</strong>(normalizer) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>normalizer=</strong>(normalizer) </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Specifies the normalizer used by <span class='object_link'><a href="../IndexColumn.html" title="Groonga::IndexColumn (class)">IndexColumn</a></span>.</p>

  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
      <pre class="example code"><code><span class='comment'># Uses NFKC normalizer.
</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_normalizer'>normalizer</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NormalizerNFKC51</span><span class='tstring_end'>&quot;</span></span>
<span class='comment'># Specifies normalizer object.
</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_normalizer'>normalizer</span> <span class='op'>=</span> <span class='const'>Groonga</span><span class='op'>::</span><span class='const'>Context</span><span class='lbracket'>[</span><span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>NormalizerNFKC51</span><span class='tstring_end'>&quot;</span></span><span class='rbracket'>]</span>
<span class='comment'># Uses auto normalizer that is a normalizer for backward compatibility.
</span><span class='id identifier rubyid_table'>table</span><span class='period'>.</span><span class='id identifier rubyid_normalizer'>normalizer</span> <span class='op'>=</span> <span class='tstring'><span class='tstring_beg'>&quot;</span><span class='tstring_content'>TNormalizerAuto</span><span class='tstring_end'>&quot;</span></span></code></pre>
    
  </div>

  <p class="tag_title">Overloads:</p>
  <ul class="overload">
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>normalizer=</strong>(name) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>name</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Set a nomalizer named <code>name</code>.</p></div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>normalizer=</strong>(normalizer) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>normalizer</span>
      
      
        <span class='type'>(<tt><span class='object_link'><a href="../Procedure.html" title="Groonga::Procedure (class)">Groonga::Procedure</a></span></tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Set the normalizer object.</p></div>
      
    </li>
  
</ul>


</div>
      </li>
    
      
      <li class="overload_item">
        <span class="signature">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>normalizer=</strong>(normalizer) </span>
        <div class="docstring">
  <div class="discussion">
    

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>normalizer</span>
      
      
        <span class='type'>(<tt>nil</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Unset normalizer.</p></div>
      
    </li>
  
</ul>


</div>
      </li>
    
  </ul>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


831
832
833
834
835
836
837
838
839
840
841
842
843
844
845
846
847
848
849
850</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 831</span>

static VALUE
rb_grn_table_key_support_set_normalizer (VALUE self, VALUE rb_normalizer)
{
    grn_ctx *context;
    grn_obj *table;
    grn_obj *normalizer;
    grn_rc rc;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    normalizer = RVAL2GRNOBJECT(rb_normalizer, &amp;context);
    rc = grn_obj_set_info(context, table, GRN_INFO_NORMALIZER, normalizer);
    rb_grn_context_check(context, self);
    rb_grn_rc_check(rc, self);

    return Qnil;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_column_value-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>set_column_value</strong>(key, name, value) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>set_column_value</strong>(id, name, value, {:id = &gt;true}) </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>table</em> の <em>key</em> に対応するカラム <em>name</em> の値を設定する。
<em>key</em> に対応するレコードがない場合は新しく作成される。</p>

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


524
525
526
527
528
529
530
531
532
533
534
535
536
537
538
539
540
541
542
543
544
545
546
547
548
549
550
551
552
553
554</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 524</span>

static VALUE
rb_grn_table_key_support_set_column_value (int argc, VALUE *argv, VALUE self)
{
    grn_id id;
    VALUE rb_key, rb_id_or_key, rb_name, rb_value, rb_options;

    rb_scan_args(argc, argv, &quot;31&quot;,
                 &amp;rb_id_or_key, &amp;rb_name, &amp;rb_value, &amp;rb_options);
    if (!NIL_P(rb_options)) {
        VALUE rb_option_id;
        rb_grn_scan_options(rb_options,
                            &quot;id&quot;, &amp;rb_option_id,
                            NULL);
        if (RVAL2CBOOL(rb_option_id)) {
            VALUE rb_id = rb_id_or_key;
            return rb_grn_table_set_column_value(self, rb_id, rb_name, rb_value);
        }
    }

    rb_key = rb_id_or_key;
    id = rb_grn_table_key_support_add_raw(self, rb_key, NULL);
    if (id == GRN_ID_NIL) {
        rb_raise(rb_eGrnError,
                 &quot;failed to add record: %s&quot;,
                 rb_grn_inspect(rb_ary_new3(4,
                                            self, rb_key,
                                            rb_name, rb_value)));
    }

    return rb_grn_table_set_column_value_raw(self, id, rb_name, rb_value);
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="set_value-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>set_value</strong>(id, value, :id = &gt;true) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>set_value</strong>(key, value) </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>table</em> の <em>id</em> または <em>key</em> に対応する値を <em>value</em> に設定する。
既存の値は上書きされる。</p>

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


691
692
693
694
695
696
697
698
699
700
701
702
703
704
705
706
707
708
709
710
711
712
713
714
715
716
717</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 691</span>

static VALUE
rb_grn_table_key_support_set_value (int argc, VALUE *argv, VALUE self)
{
    VALUE rb_id_or_key, rb_value, rb_options;
    grn_bool use_key;

    rb_scan_args(argc, argv, &quot;21&quot;, &amp;rb_id_or_key, &amp;rb_value, &amp;rb_options);

    if (NIL_P(rb_options)) {
        use_key = GRN_TRUE;
    } else {
        VALUE rb_option_id;

        rb_grn_scan_options(rb_options,
                            &quot;id&quot;, &amp;rb_option_id,
                            NULL);
        use_key = !RVAL2CBOOL(rb_option_id);
    }

    if (use_key) {
        return rb_grn_table_key_support_set_value_by_key(self,
                                                         rb_id_or_key,
                                                         rb_value);
    } else {
        return rb_grn_table_set_value(self, rb_id_or_key, rb_value);
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="support_key?-instance_method">
  
    - (<tt>Boolean</tt>) <strong>support_key?</strong> 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>テーブルでキーを使えるなら <ins>true</ins> 、使えないなら <ins>false</ins> を返
す。キーを使えないテーブルは <span class='object_link'><a href="../Array.html" title="Groonga::Array (class)">Array</a></span> だけ。</p>

  </div>
</div>
<div class="tags">
  
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


873
874
875
876
877
878
879
880
881
882
883</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 873</span>

static VALUE
rb_grn_table_key_support_support_key_p (VALUE self)
{
    grn_obj *table;

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, NULL,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);
    return table-&gt;header.domain == GRN_ID_NIL ? Qfalse : Qtrue;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="tokenize-instance_method">
  
    - (<tt>::Array&lt;<span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Groonga::Record</a></span>&gt;</tt>) <strong>tokenize</strong>(string, options = {}) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Tokenize a string using the table as lexicon.</p>

  </div>
</div>
<div class="tags">
  
  <div class="docstring">
  <div class="discussion">
    <p>Returns Tokenized tokens.</p>

  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>string</span>
      
      
        <span class='type'>(<tt>String</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>The string to be tokenized.</p></div>
      
    </li>
  
    <li>
      
        <span class='name'>options</span>
      
      
        <span class='type'>(<tt>::Hash</tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:add</span>
          <span class="type">(<tt>Bool</tt>)</span>
          <span class="default">
            
              &mdash; default:
              <tt>true</tt>
            
          </span>
          
            &mdash; <div class='inline'><p>Adds a new token to the table if true.
Returned tokens include the new token. Otherwise, a new token is
just ignored.</p></div>
          
        </li>
      
    </ul>
  

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>::Array&lt;<span class='object_link'><a href="../Record.html" title="Groonga::Record (class)">Groonga::Record</a></span>&gt;</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'><p>Tokenized tokens.</p></div>
      
    </li>
  
</ul>

</div>


</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


896
897
898
899
900
901
902
903
904
905
906
907
908
909
910
911
912
913
914
915
916
917
918
919
920
921
922
923
924
925
926
927
928
929
930
931
932
933
934
935
936</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 896</span>

static VALUE
rb_grn_table_key_support_tokenize (int argc, VALUE *argv, VALUE self)
{
    VALUE rb_string, rb_add_p;
    VALUE rb_options;
    VALUE rb_tokens = Qnil;
    grn_ctx *context;
    grn_obj *table;
    char *string;
    int string_size;
    grn_bool add_p;
    grn_obj tokens;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;rb_string, &amp;rb_options);
    rb_grn_scan_options(rb_options,
                        &quot;add&quot;, &amp;rb_add_p,
                        NULL);
    if (NIL_P(rb_add_p)) {
        rb_add_p = Qtrue;
    }

    rb_grn_table_key_support_deconstruct(SELF(self), &amp;table, &amp;context,
                                         NULL, NULL, NULL,
                                         NULL, NULL, NULL,
                                         NULL);

    string = StringValueCStr(rb_string);
    string_size = RSTRING_LEN(rb_string);

    add_p = RVAL2CBOOL(rb_add_p);

    GRN_RECORD_INIT(&amp;tokens, GRN_OBJ_VECTOR, grn_obj_id(context, table));
    grn_table_tokenize(context, table, string, string_size, &amp;tokens, add_p);
    if (context-&gt;rc == GRN_SUCCESS) {
        rb_tokens = GRNUVECTOR2RVAL(context, &amp;tokens, table, self);
    }
    grn_obj_unlink(context, &amp;tokens);
    rb_grn_context_check(context, self);

    return rb_tokens;
}</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="value-instance_method">
  
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>value</strong>(id, :id = &gt;true) </span>
    
      <span class="overload">- (<tt><span class='object_link'><a href="../Object.html" title="Groonga::Object (class)">Object</a></span></tt>) <strong>value</strong>(key) </span>
    
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p><em>table</em> の <em>id</em> または <em>key</em> に対応する値を返す。</p>

  </div>
</div>
<div class="tags">
  
<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'></span>
      
      
      
        
        <div class='inline'><p><em>id</em> もしくは <em>key</em> に対応する値</p></div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


621
622
623
624
625
626
627
628
629
630
631
632
633
634
635
636
637
638
639
640
641
642
643
644
645</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'ext/groonga/rb-grn-table-key-support.c', line 621</span>

static VALUE
rb_grn_table_key_support_get_value (int argc, VALUE *argv, VALUE self)
{
    VALUE rb_id_or_key, rb_options;
    grn_bool use_key;

    rb_scan_args(argc, argv, &quot;11&quot;, &amp;rb_id_or_key, &amp;rb_options);

    if (NIL_P(rb_options)) {
        use_key = GRN_TRUE;
    } else {
        VALUE rb_option_id;

        rb_grn_scan_options(rb_options,
                            &quot;id&quot;, &amp;rb_option_id,
                            NULL);
        use_key = !RVAL2CBOOL(rb_option_id);
    }

    if (use_key) {
        return rb_grn_table_key_support_get_value_by_key(self, rb_id_or_key);
    } else {
        return rb_grn_table_get_value(self, rb_id_or_key);
    }
}</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer"></div>

  
    </div>

    <div class="sponsors">
      <p id="sponsor-github">
        <a href="https://github.com/ranguba/">
          <img src="../../../../github-logo.png" width="100" height="45" border="0" alt="The Ranguba project uses GitHub's git repositories." />
        </a>
      </p>
      <p id="sponsor-tango">
	<a href="http://tango.freedesktop.org/">
          <img width="120" height="53" border="0" alt="Tango Desktop Project's icons are used." src="../../../../tango-logo.png" />
        </a>
      </p>
      <p id="sponsor-famfamfam">
	<a href="http://www.famfamfam.com/">
          <img width="120" height="18" border="0" alt="famfamfam.com's flags are used." src="../../../../famfamfam-logo.png" />
        </a>
      </p>
    </div>

</body>
</html>