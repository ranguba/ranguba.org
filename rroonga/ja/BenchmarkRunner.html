<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ja" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" href="../../ranguba.css" type="text/css" />
    <link rel="shortcut icon" href="../../favicon.ico" />
    <link rel="icon" href="../../favicon.png" />
    <title>
  Class: BenchmarkRunner
  
    &mdash; rroonga
  
 - ラングバ</title>


  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  relpath = '';
  if (relpath != '') relpath += '/';
</script>

  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
<div class="header">
  <div class="title">
    <a href="../../index.html.ja">
      <span class="title">
  Class: BenchmarkRunner
  
    &mdash; rroonga
  
</span>
      <span class="title-separator">-</span>
      <span class="title-project">ラングバ</span>
    </a>
  </div>
  <ul class="other-languages">
    <li id="other-language-english" lang="en" xml:lang="en"><a href="../../rroonga/en/BenchmarkRunner.html">English</a></li>
  </ul>
  <ul class="menu">
    <li id="menu-reference"><a href="../../rroonga/ja/">リファレンスマニュアル</a></li>
    <li id="menu-tutorial"><a href="../../rroonga/ja/file.tutorial.html">チュートリアル</a></li>
    <li id="menu-install"><a href="../../index.html.ja#install-rroonga">インストール</a></li>
    <li id="menu-developer"><a href="../../developer.html.ja">開発者向け情報</a></li>
  </ul>
</div>

<div class="content">


    <script type="text/javascript" charset="utf-8">
      if (window.top.frames.main) document.body.className = 'frames';
    </script>
    
    <div id="header">
      <div id="menu">
  
    <a href="_index.html">Index (B)</a> &raquo; 
    
    
    <span class="title">BenchmarkRunner</span>
  
  
  <div class="noframes"><span class="title">(</span><a href="." target="_top">フレーム無し</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a id="class_list_link" href="#">クラスリスト</a>
  
    <a id="method_list_link" href="#">メソッドリスト</a>
  
    <a id="file_list_link" href="#">ファイルリスト</a>
  
</div>
      <div class="clear"></div>
    </div>
    
    <iframe id="search_frame"></iframe>
    
    <div id="content"><h1>Class: BenchmarkRunner
  
  
  
</h1>

<dl class="box">
  
    <dt class="r1">Inherits:</dt>
    <dd class="r1">
      <span class="inheritName">Object</span>
      
        <ul class="fullTree">
          <li>Object</li>
          
            <li class="next">BenchmarkRunner</li>
          
        </ul>
        <a href="#" class="inheritanceTree">show all</a>
      
      </dd>
    
  
  
    
  
    
  
  
  
    <dt class="r2 last">Defined in:</dt>
    <dd class="r2 last">benchmark/select.rb</dd>
  
</dl>
<div class="clear"></div>


  <h2>Constant Summary</h2>
  
    <dl class="constants">
      
        <dt id="DEFAULT_MODE-constant" class="">DEFAULT_MODE =
          <div class="docstring">
  <div class="discussion">
    <p>:mesure_memory, :mesure_io, :mesure_???</p>

  </div>
</div>
<div class="tags">
  

</div>
        </dt>
        <dd><pre class="code"><span class="symbol">:measure_time</span></pre></dd>
      
        <dt id="LOCK_TIMEOUT_SECONDS-constant" class="">LOCK_TIMEOUT_SECONDS =
          
        </dt>
        <dd><pre class="code"><span class="int">10</span></pre></dd>
      
        <dt id="DEFAULT_REPEAT_COUNT-constant" class="">DEFAULT_REPEAT_COUNT =
          
        </dt>
        <dd><pre class="code"><span class="int">5</span></pre></dd>
      
        <dt id="DEFAULT_WIKIPEDIA_DATABASE_LOCATION-constant" class="">DEFAULT_WIKIPEDIA_DATABASE_LOCATION =
          
        </dt>
        <dd><pre class="code"><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">/tmp/wikipedia-db/db</span><span class="tstring_end">"</span></span></pre></dd>
      
    </dl>
  


  <h2>Instance Attribute Summary <small>(<a href="#" class="summary_toggle">collapse</a>)</small></h2>
  <ul class="summary">
    
      <li class="public ">
  <span class="summary_signature">
    
      <a href="#context-instance_method" title="#context (instance method)">- (Object) <strong>context</strong> </a>
    

    
  </span>
  
  
    
    
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"><p>Returns the value of attribute context.</p></div></span>
  
</li>

    
  </ul>




  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#command_selector_profile-class_method" title="command_selector_profile (class method)">+ (Object) <strong>command_selector_profile</strong>(select_command) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#ensure_database-class_method" title="ensure_database (class method)">+ (Object) <strong>ensure_database</strong>(configuration) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#load_predefined_queries-class_method" title="load_predefined_queries (class method)">+ (Object) <strong>load_predefined_queries</strong>(runner, options) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#method_selector_profile-class_method" title="method_selector_profile (class method)">+ (Object) <strong>method_selector_profile</strong>(select_method) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#output_columns_with_content-class_method" title="output_columns_with_content (class method)">+ (Object) <strong>output_columns_with_content</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#output_columns_without_content-class_method" title="output_columns_without_content (class method)">+ (Object) <strong>output_columns_without_content</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#predefined_queries-class_method" title="predefined_queries (class method)">+ (Object) <strong>predefined_queries</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#select_benchmark_default_setup-class_method" title="select_benchmark_default_setup (class method)">+ (Object) <strong>select_benchmark_default_setup</strong>(runner, options = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
    </ul>
  
    <h2>
      Instance Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_profile-instance_method" title="#add_profile (instance method)">- (Object) <strong>add_profile</strong>(profile) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#add_query-instance_method" title="#add_query (instance method)">- (Object) <strong>add_query</strong>(query, label = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#assert_equivalent_to-instance_method" title="#assert_equivalent_to (instance method)">- (Object) <strong>assert_equivalent_to</strong>(first_result, second_result) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#benchmark_mode-instance_method" title="#benchmark_mode (instance method)">- (Object) <strong>benchmark_mode</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#collect_benchmarks-instance_method" title="#collect_benchmarks (instance method)">- (Object) <strong>collect_benchmarks</strong>(query) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#create_report-instance_method" title="#create_report (instance method)">- (Object) <strong>create_report</strong>(benchmarks, query, label = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#debug_benchmarks-instance_method" title="#debug_benchmarks (instance method)">- (Object) <strong>debug_benchmarks</strong>(query, benchmarks) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#do_run-instance_method" title="#do_run (instance method)">- (Object) <strong>do_run</strong>(query, label = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#do_run_once-instance_method" title="#do_run_once (instance method)">- (Object) <strong>do_run_once</strong>(query) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#initialize-instance_method" title="#initialize (instance method)">- (BenchmarkRunner) <strong>initialize</strong>(options = {}) </a>
    

    
  </span>
  
    <span class="note title constructor">constructor</span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"><p>A new instance of BenchmarkRunner.</p></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#lock-instance_method" title="#lock (instance method)">- (Object) <strong>lock</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#repeat_count-instance_method" title="#repeat_count (instance method)">- (Object) <strong>repeat_count</strong> </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#report_benchmarks-instance_method" title="#report_benchmarks (instance method)">- (Object) <strong>report_benchmarks</strong>(benchmarks, query, label) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run-instance_method" title="#run (instance method)">- (Object) <strong>run</strong>(query = nil) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#run_once-instance_method" title="#run_once (instance method)">- (Object) <strong>run_once</strong>(query) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#verify_results-instance_method" title="#verify_results (instance method)">- (Object) <strong>verify_results</strong>(benchmarks) </a>
    

    
  </span>
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"></div></span>
  
</li>

      
    </ul>
  

<div id="constructor_details" class="method_details_list">
  <h2>Constructor Details</h2>
  
    <div class="method_details first">
  <p class="signature first" id="initialize-instance_method">
  
    - (<tt><span class="object_link"><a href="" title="BenchmarkRunner (class)">BenchmarkRunner</a></span></tt>) <strong>initialize</strong>(options = {}) 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>A new instance of BenchmarkRunner</p>

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


781
782
783
784
785</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 781</span>

<span class="kw">def</span> <span class="id initialize">initialize</span><span class="lparen">(</span><span class="id options">options</span><span class="op">=</span><span class="lbrace">{</span><span class="rbrace">}</span><span class="rparen">)</span>
  <span class="ivar">@options</span> <span class="op">=</span> <span class="id options">options</span>
  <span class="ivar">@profiles</span> <span class="op">=</span> <span class="lbracket">[</span><span class="rbracket">]</span>
  <span class="ivar">@queries</span> <span class="op">=</span> <span class="lbracket">[</span><span class="rbracket">]</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
  
</div>

  <div id="instance_attr_details" class="attr_details">
    <h2>Instance Attribute Details</h2>
    
      
      <span id="context=-instance_method"></span>
      <span id="context-instance_method"></span>
      <div class="method_details first">
  <p class="signature first" id="context-instance_method">
  
    - (<tt>Object</tt>) <strong>context</strong> 
  

  
</p><div class="docstring">
  <div class="discussion">
    <p>Returns the value of attribute context</p>

  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


778
779
780</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 778</span>

<span class="kw">def</span> <span class="id context">context</span>
  <span class="ivar">@context</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>


  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="command_selector_profile-class_method">
  
    + (<tt>Object</tt>) <strong>command_selector_profile</strong>(select_command) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


926
927
928
929
930
931</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 926</span>

<span class="kw">def</span> <span class="id command_selector_profile">command_selector_profile</span><span class="lparen">(</span><span class="id select_command">select_command</span><span class="rparen">)</span>
  <span class="const">Profile</span><span class="period">.</span><span class="id new">new</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">select by command</span><span class="tstring_end">"</span></span><span class="comma">,</span>
              <span class="id select_command">select_command</span><span class="comma">,</span>
              <span class="lbracket">[</span><span class="id select_command">select_command</span><span class="period">.</span><span class="id context">context</span><span class="period">.</span><span class="id method">method</span><span class="lparen">(</span><span class="symbol">:send</span><span class="rparen">)</span><span class="comma">,</span>
               <span class="const">Groonga</span><span class="op">::</span><span class="const">Context</span><span class="op">::</span><span class="const">SelectResult</span><span class="period">.</span><span class="id method">method</span><span class="lparen">(</span><span class="symbol">:parse</span><span class="rparen">)</span><span class="rbracket">]</span><span class="rparen">)</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="ensure_database-class_method">
  
    + (<tt>Object</tt>) <strong>ensure_database</strong>(configuration) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


913
914
915
916
917
918
919
920
921
922
923
924</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 913</span>

<span class="kw">def</span> <span class="id ensure_database">ensure_database</span><span class="lparen">(</span><span class="id configuration">configuration</span><span class="rparen">)</span>
  <span class="kw">unless</span> <span class="const">File</span><span class="period">.</span><span class="id exist?">exist?</span><span class="lparen">(</span><span class="id configuration">configuration</span><span class="period">.</span><span class="id database_path">database_path</span><span class="rparen">)</span>
    <span class="id puts">puts</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">you must create wikipedia database to use, or specify it via "DATABASE_PATH" environment variable</span><span class="tstring_end">'</span></span>
    <span class="id puts">puts</span>
    <span class="id puts">puts</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">how to create wikipedia database</span><span class="tstring_end">'</span></span>
    <span class="id puts">puts</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">1. download wikipedia dump.</span><span class="tstring_end">'</span></span>
    <span class="id puts">puts</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">   $ wget -c http://download.wikimedia.org/jawiki/latest/jawiki-latest-pages-articles.xml.bz2</span><span class="tstring_end">'</span></span>
    <span class="id puts">puts</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">2. create groonga database from the dump</span><span class="tstring_end">'</span></span>
    <span class="id puts">puts</span> <span class="tstring"><span class="tstring_beg">'</span><span class="tstring_content">   $ cat jawiki-latest-pages-articles.xml.bz2 | bunzip2 | ruby1.9.1 ./benchmark/create-wikipedia-database.rb</span><span class="tstring_end">'</span></span>
    <span class="id exit">exit</span> <span class="int">1</span>
  <span class="kw">end</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="load_predefined_queries-class_method">
  
    + (<tt>Object</tt>) <strong>load_predefined_queries</strong>(runner, options) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


979
980
981
982
983
984</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 979</span>

<span class="kw">def</span> <span class="id load_predefined_queries">load_predefined_queries</span><span class="lparen">(</span><span class="id runner">runner</span><span class="comma">,</span> <span class="id options">options</span><span class="rparen">)</span>
  <span class="id predefined_queries">predefined_queries</span><span class="period">.</span><span class="id each">each</span> <span class="kw">do</span> <span class="op">|</span><span class="id command">command</span><span class="comma">,</span> <span class="id label">label</span><span class="op">|</span>
    <span class="id query">query</span> <span class="op">=</span> <span class="const">Query</span><span class="period">.</span><span class="id parse_groonga_query_log">parse_groonga_query_log</span><span class="lparen">(</span><span class="id command">command</span><span class="rparen">)</span>
    <span class="id runner">runner</span><span class="period">.</span><span class="id add_query">add_query</span><span class="lparen">(</span><span class="id query">query</span><span class="comma">,</span> <span class="id label">label</span><span class="rparen">)</span>
  <span class="kw">end</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="method_selector_profile-class_method">
  
    + (<tt>Object</tt>) <strong>method_selector_profile</strong>(select_method) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


933
934
935
936
937
938
939
940
941
942</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 933</span>

<span class="kw">def</span> <span class="id method_selector_profile">method_selector_profile</span><span class="lparen">(</span><span class="id select_method">select_method</span><span class="rparen">)</span>
  <span class="const">Profile</span><span class="period">.</span><span class="id new">new</span><span class="lparen">(</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">select by method</span><span class="tstring_end">"</span></span><span class="comma">,</span>
              <span class="id select_method">select_method</span><span class="comma">,</span>
              <span class="lbracket">[</span><span class="symbol">:do_select</span><span class="comma">,</span>
               <span class="symbol">:sort</span><span class="comma">,</span>
               <span class="symbol">:format</span><span class="comma">,</span>
               <span class="symbol">:drilldown</span><span class="comma">,</span> <span class="lbracket">[</span><span class="symbol">:do_group</span><span class="comma">,</span>
                            <span class="symbol">:drilldown_sort</span><span class="comma">,</span>
                            <span class="symbol">:drilldown_format</span><span class="rbracket">]</span><span class="rbracket">]</span><span class="rparen">)</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="output_columns_with_content-class_method">
  
    + (<tt>Object</tt>) <strong>output_columns_with_content</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


948
949
950</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 948</span>

<span class="kw">def</span> <span class="id output_columns_with_content">output_columns_with_content</span>
  <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">--output_columns '_id _key year wday timestamp month hour date last_contributor content'</span><span class="tstring_end">"</span></span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="output_columns_without_content-class_method">
  
    + (<tt>Object</tt>) <strong>output_columns_without_content</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


944
945
946</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 944</span>

<span class="kw">def</span> <span class="id output_columns_without_content">output_columns_without_content</span>
  <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">--output_columns '_id _key year wday timestamp month hour date last_contributor'</span><span class="tstring_end">"</span></span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="predefined_queries-class_method">
  
    + (<tt>Object</tt>) <strong>predefined_queries</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


952
953
954
955
956
957
958
959
960
961
962
963
964
965
966
967
968
969
970
971
972
973
974
975
976
977</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 952</span>

<span class="kw">def</span> <span class="id predefined_queries">predefined_queries</span>
  <span class="lbracket">[</span>
    <span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">select Documents</span><span class="tstring_end">"</span></span><span class="comma">,</span>
     <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">minimum command</span><span class="tstring_end">"</span></span><span class="rbracket">]</span><span class="comma">,</span>
    <span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">select Documents --filter true</span><span class="tstring_end">"</span></span><span class="comma">,</span>
     <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">select all</span><span class="tstring_end">"</span></span><span class="rbracket">]</span><span class="comma">,</span>
    <span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">select Documents --filter false</span><span class="tstring_end">"</span></span><span class="comma">,</span>
     <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">select none</span><span class="tstring_end">"</span></span><span class="rbracket">]</span><span class="comma">,</span>
    <span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">select Documents content アルミ </span><span class="embexpr_beg">#{</span><span class="id output_columns_without_content">output_columns_without_content</span><span class="rbrace">}</span><span class="tstring_end">"</span></span><span class="comma">,</span>
     <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">full text search</span><span class="tstring_end">"</span></span><span class="rbracket">]</span><span class="comma">,</span>
    <span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">select Documents content アルミ </span><span class="embexpr_beg">#{</span><span class="id output_columns_without_content">output_columns_without_content</span><span class="rbrace">}</span><span class="tstring_content"> --limit 0</span><span class="tstring_end">"</span></span><span class="comma">,</span>
     <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">full text search with no limit</span><span class="tstring_end">"</span></span><span class="rbracket">]</span><span class="comma">,</span>
    <span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">select Documents content アルミ </span><span class="embexpr_beg">#{</span><span class="id output_columns_with_content">output_columns_with_content</span><span class="rbrace">}</span><span class="tstring_end">"</span></span><span class="comma">,</span>
     <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">full text search output long text column</span><span class="tstring_end">"</span></span><span class="rbracket">]</span><span class="comma">,</span>
    <span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">select Documents content アルミ </span><span class="embexpr_beg">#{</span><span class="id output_columns_without_content">output_columns_without_content</span><span class="rbrace">}</span><span class="tstring_content"> --limit 1000</span><span class="tstring_end">"</span></span><span class="comma">,</span>
     <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">full text search with large limit</span><span class="tstring_end">"</span></span><span class="rbracket">]</span><span class="comma">,</span>
    <span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">select Documents --filter true --limit 0 --drilldown last_contributor --drilldown_sortby _nsubrecs</span><span class="tstring_end">"</span></span><span class="comma">,</span>
     <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">drilldown</span><span class="tstring_end">"</span></span><span class="rbracket">]</span><span class="comma">,</span>
    <span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">select Documents --filter true --limit 0 --drilldown last_contributor --drilldown_sortby _nsubrecs --drilldown_limit 10000</span><span class="tstring_end">"</span></span><span class="comma">,</span>
     <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">drilldown with large drilldown_limit</span><span class="tstring_end">"</span></span><span class="rbracket">]</span><span class="comma">,</span>
    <span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">select Documents --sortby _key</span><span class="tstring_end">"</span></span><span class="comma">,</span>
     <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">sort</span><span class="tstring_end">"</span></span><span class="rbracket">]</span><span class="comma">,</span>
    <span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">select Documents --sortby _key --drilldown 'year month date wday hour, last_contributor links' --drilldown_sortby _nsubrecs</span><span class="tstring_end">"</span></span><span class="comma">,</span>
     <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">sort with drilldown</span><span class="tstring_end">"</span></span><span class="rbracket">]</span><span class="comma">,</span>
  <span class="rbracket">]</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="select_benchmark_default_setup-class_method">
  
    + (<tt>Object</tt>) <strong>select_benchmark_default_setup</strong>(runner, options = nil) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


895
896
897
898
899
900
901
902
903
904
905
906
907
908
909
910
911</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 895</span>

<span class="kw">def</span> <span class="id select_benchmark_default_setup">select_benchmark_default_setup</span><span class="lparen">(</span><span class="id runner">runner</span><span class="comma">,</span> <span class="id options">options</span><span class="op">=</span><span class="kw">nil</span><span class="rparen">)</span>
  <span class="id options">options</span> <span class="op">||=</span> <span class="lbrace">{</span><span class="rbrace">}</span>

  <span class="id configuration">configuration</span> <span class="op">=</span> <span class="const">Configuration</span><span class="period">.</span><span class="id new">new</span>
  <span class="id configuration">configuration</span><span class="period">.</span><span class="id database_path">database_path</span> <span class="op">=</span> <span class="id options">options</span><span class="lbracket">[</span><span class="symbol">:database_path</span><span class="rbracket">]</span> <span class="op">||</span> <span class="const">DEFAULT_WIKIPEDIA_DATABASE_LOCATION</span>
  <span class="id ensure_database">ensure_database</span><span class="lparen">(</span><span class="id configuration">configuration</span><span class="rparen">)</span>

  <span class="id context">context</span> <span class="op">=</span> <span class="const">Groonga</span><span class="op">::</span><span class="const">Context</span><span class="period">.</span><span class="id new">new</span>
  <span class="id select_command">select_command</span> <span class="op">=</span> <span class="const">SelectorByCommand</span><span class="period">.</span><span class="id new">new</span><span class="lparen">(</span><span class="id context">context</span><span class="comma">,</span> <span class="id configuration">configuration</span><span class="period">.</span><span class="id database_path">database_path</span><span class="rparen">)</span>
  <span class="id select_method">select_method</span> <span class="op">=</span> <span class="const">SelectorByMethod</span><span class="period">.</span><span class="id new">new</span><span class="lparen">(</span><span class="id context">context</span><span class="comma">,</span> <span class="id configuration">configuration</span><span class="period">.</span><span class="id database_path">database_path</span><span class="rparen">)</span>
  <span class="id select_command_profile">select_command_profile</span> <span class="op">=</span> <span class="id command_selector_profile">command_selector_profile</span><span class="lparen">(</span><span class="id select_command">select_command</span><span class="rparen">)</span>
  <span class="id select_method_profile">select_method_profile</span> <span class="op">=</span> <span class="id method_selector_profile">method_selector_profile</span><span class="lparen">(</span><span class="id select_method">select_method</span><span class="rparen">)</span>

  <span class="id runner">runner</span><span class="period">.</span><span class="id context">context</span> <span class="op">=</span> <span class="id context">context</span>
  <span class="id runner">runner</span><span class="period">.</span><span class="id add_profile">add_profile</span><span class="lparen">(</span><span class="id select_command_profile">select_command_profile</span><span class="rparen">)</span>
  <span class="id runner">runner</span><span class="period">.</span><span class="id add_profile">add_profile</span><span class="lparen">(</span><span class="id select_method_profile">select_method_profile</span><span class="rparen">)</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

  <div id="instance_method_details" class="method_details_list">
    <h2>Instance Method Details</h2>
    
    
      <div class="method_details first">
  <p class="signature first" id="add_profile-instance_method">
  
    - (<tt>Object</tt>) <strong>add_profile</strong>(profile) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


791
792
793
794</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 791</span>

<span class="kw">def</span> <span class="id add_profile">add_profile</span><span class="lparen">(</span><span class="id profile">profile</span><span class="rparen">)</span>
  <span class="id profile">profile</span><span class="period">.</span><span class="id mode">mode</span> <span class="op">=</span> <span class="id benchmark_mode">benchmark_mode</span>
  <span class="ivar">@profiles</span> <span class="op">&lt;&lt;</span> <span class="id profile">profile</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="add_query-instance_method">
  
    - (<tt>Object</tt>) <strong>add_query</strong>(query, label = nil) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


796
797
798</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 796</span>

<span class="kw">def</span> <span class="id add_query">add_query</span><span class="lparen">(</span><span class="id query">query</span><span class="comma">,</span> <span class="id label">label</span><span class="op">=</span><span class="kw">nil</span><span class="rparen">)</span>
  <span class="ivar">@queries</span> <span class="op">&lt;&lt;</span> <span class="lbracket">[</span><span class="id query">query</span><span class="comma">,</span> <span class="id label">label</span><span class="rbracket">]</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="assert_equivalent_to-instance_method">
  
    - (<tt>Object</tt>) <strong>assert_equivalent_to</strong>(first_result, second_result) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


885
886
887</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 885</span>

<span class="kw">def</span> <span class="id assert_equivalent_to">assert_equivalent_to</span><span class="lparen">(</span><span class="id first_result">first_result</span><span class="comma">,</span> <span class="id second_result">second_result</span><span class="rparen">)</span>
  <span class="id first_result">first_result</span> <span class="op">==</span> <span class="id second_result">second_result</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="benchmark_mode-instance_method">
  
    - (<tt>Object</tt>) <strong>benchmark_mode</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


787
788
789</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 787</span>

<span class="kw">def</span> <span class="id benchmark_mode">benchmark_mode</span>
  <span class="ivar">@options</span><span class="lbracket">[</span><span class="symbol">:mode</span><span class="rbracket">]</span> <span class="op">||</span> <span class="const">DEFAULT_MODE</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="collect_benchmarks-instance_method">
  
    - (<tt>Object</tt>) <strong>collect_benchmarks</strong>(query) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


807
808
809
810
811
812
813</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 807</span>

<span class="kw">def</span> <span class="id collect_benchmarks">collect_benchmarks</span><span class="lparen">(</span><span class="id query">query</span><span class="rparen">)</span>
  <span class="id lock">lock</span> <span class="kw">do</span>
    <span class="ivar">@profiles</span><span class="period">.</span><span class="id collect">collect</span> <span class="kw">do</span> <span class="op">|</span><span class="id profile">profile</span><span class="op">|</span>
      <span class="id profile">profile</span><span class="period">.</span><span class="id take_benchmark">take_benchmark</span><span class="lparen">(</span><span class="id query">query</span><span class="rparen">)</span>
    <span class="kw">end</span>
  <span class="kw">end</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="create_report-instance_method">
  
    - (<tt>Object</tt>) <strong>create_report</strong>(benchmarks, query, label = nil) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


889
890
891</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 889</span>

<span class="kw">def</span> <span class="id create_report">create_report</span><span class="lparen">(</span><span class="id benchmarks">benchmarks</span><span class="comma">,</span> <span class="id query">query</span><span class="comma">,</span> <span class="id label">label</span><span class="op">=</span><span class="kw">nil</span><span class="rparen">)</span>
  <span class="const">Report</span><span class="period">.</span><span class="id new">new</span><span class="lparen">(</span><span class="id query">query</span><span class="comma">,</span> <span class="id label">label</span><span class="comma">,</span> <span class="id benchmarks">benchmarks</span><span class="comma">,</span> <span class="id repeat_count">repeat_count</span><span class="rparen">)</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="debug_benchmarks-instance_method">
  
    - (<tt>Object</tt>) <strong>debug_benchmarks</strong>(query, benchmarks) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


815
816
817
818
819
820</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 815</span>

<span class="kw">def</span> <span class="id debug_benchmarks">debug_benchmarks</span><span class="lparen">(</span><span class="id query">query</span><span class="comma">,</span> <span class="id benchmarks">benchmarks</span><span class="rparen">)</span>
  <span class="kw">if</span> <span class="const">ENV</span><span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">DEBUG</span><span class="tstring_end">"</span></span><span class="rbracket">]</span>
    <span class="id pp">pp</span> <span class="id query">query</span>
    <span class="id pp">pp</span> <span class="id benchmarks">benchmarks</span>
  <span class="kw">end</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="do_run-instance_method">
  
    - (<tt>Object</tt>) <strong>do_run</strong>(query, label = nil) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


862
863
864
865
866
867
868
869
870
871
872
873</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 862</span>

<span class="kw">def</span> <span class="id do_run">do_run</span><span class="lparen">(</span><span class="id query">query</span><span class="comma">,</span> <span class="id label">label</span><span class="op">=</span><span class="kw">nil</span><span class="rparen">)</span>
  <span class="id benchmarks_set">benchmarks_set</span> <span class="op">=</span> <span class="id repeat_count">repeat_count</span><span class="period">.</span><span class="id times">times</span><span class="period">.</span><span class="id collect">collect</span> <span class="kw">do</span>
    <span class="id do_run_once">do_run_once</span><span class="lparen">(</span><span class="id query">query</span><span class="rparen">)</span>
  <span class="kw">end</span>
  <span class="id total_benchmarks">total_benchmarks</span> <span class="op">=</span> <span class="id benchmarks_set">benchmarks_set</span><span class="period">.</span><span class="id shift">shift</span>
  <span class="id benchmarks_set">benchmarks_set</span><span class="period">.</span><span class="id each">each</span> <span class="kw">do</span> <span class="op">|</span><span class="id benchmarks">benchmarks</span><span class="op">|</span>
    <span class="id benchmarks">benchmarks</span><span class="period">.</span><span class="id each_with_index">each_with_index</span> <span class="kw">do</span> <span class="op">|</span><span class="id benchmark">benchmark</span><span class="comma">,</span> <span class="id index">index</span><span class="op">|</span>
      <span class="id total_benchmarks">total_benchmarks</span><span class="lbracket">[</span><span class="id index">index</span><span class="rbracket">]</span> <span class="op">+=</span> <span class="id benchmark">benchmark</span>
    <span class="kw">end</span>
  <span class="kw">end</span>
  <span class="id report_benchmarks">report_benchmarks</span><span class="lparen">(</span><span class="id total_benchmarks">total_benchmarks</span><span class="comma">,</span> <span class="id query">query</span><span class="comma">,</span> <span class="id label">label</span><span class="rparen">)</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="do_run_once-instance_method">
  
    - (<tt>Object</tt>) <strong>do_run_once</strong>(query) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


827
828
829
830
831
832
833
834</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 827</span>

<span class="kw">def</span> <span class="id do_run_once">do_run_once</span><span class="lparen">(</span><span class="id query">query</span><span class="rparen">)</span>
  <span class="id benchmarks">benchmarks</span> <span class="op">=</span> <span class="id collect_benchmarks">collect_benchmarks</span><span class="lparen">(</span><span class="id query">query</span><span class="rparen">)</span>

  <span class="id debug_benchmarks">debug_benchmarks</span><span class="lparen">(</span><span class="id query">query</span><span class="comma">,</span> <span class="id benchmarks">benchmarks</span><span class="rparen">)</span>
  <span class="id verify_results">verify_results</span><span class="lparen">(</span><span class="id benchmarks">benchmarks</span><span class="rparen">)</span>

  <span class="id benchmarks">benchmarks</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="lock-instance_method">
  
    - (<tt>Object</tt>) <strong>lock</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


801
802
803
804
805</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 801</span>

<span class="kw">def</span> <span class="id lock">lock</span>
  <span class="ivar">@context</span><span class="period">.</span><span class="id database">database</span><span class="period">.</span><span class="id lock">lock</span><span class="lparen">(</span><span class="symbol">:timeout</span> <span class="op">=&gt;</span> <span class="const">LOCK_TIMEOUT_SECONDS</span> <span class="op">*</span> <span class="int">1000</span><span class="rparen">)</span> <span class="kw">do</span>
    <span class="kw">yield</span>
  <span class="kw">end</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="repeat_count-instance_method">
  
    - (<tt>Object</tt>) <strong>repeat_count</strong> 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


842
843
844</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 842</span>

<span class="kw">def</span> <span class="id repeat_count">repeat_count</span>
  <span class="ivar">@options</span><span class="lbracket">[</span><span class="symbol">:repeat_count</span><span class="rbracket">]</span> <span class="op">||</span> <span class="const">DEFAULT_REPEAT_COUNT</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="report_benchmarks-instance_method">
  
    - (<tt>Object</tt>) <strong>report_benchmarks</strong>(benchmarks, query, label) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


836
837
838
839</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 836</span>

<span class="kw">def</span> <span class="id report_benchmarks">report_benchmarks</span><span class="lparen">(</span><span class="id benchmarks">benchmarks</span><span class="comma">,</span> <span class="id query">query</span><span class="comma">,</span> <span class="id label">label</span><span class="rparen">)</span>
  <span class="id report">report</span> <span class="op">=</span> <span class="id create_report">create_report</span><span class="lparen">(</span><span class="id benchmarks">benchmarks</span><span class="comma">,</span> <span class="id query">query</span><span class="comma">,</span> <span class="id label">label</span><span class="rparen">)</span>
  <span class="id report">report</span><span class="period">.</span><span class="id print">print</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="run-instance_method">
  
    - (<tt>Object</tt>) <strong>run</strong>(query = nil) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


846
847
848
849
850
851
852
853
854
855
856
857
858
859
860</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 846</span>

<span class="kw">def</span> <span class="id run">run</span><span class="lparen">(</span><span class="id query">query</span><span class="op">=</span><span class="kw">nil</span><span class="rparen">)</span>
  <span class="kw">if</span> <span class="id query">query</span>
    <span class="id do_run">do_run</span><span class="lparen">(</span><span class="id query">query</span><span class="rparen">)</span>
  <span class="kw">else</span>
    <span class="id raise">raise</span> <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">no query</span><span class="tstring_end">"</span></span> <span class="kw">if</span> <span class="ivar">@queries</span><span class="period">.</span><span class="id empty?">empty?</span>

    <span class="id index">index</span> <span class="op">=</span> <span class="int">0</span>
    <span class="ivar">@queries</span><span class="period">.</span><span class="id each">each</span> <span class="kw">do</span> <span class="op">|</span><span class="id query">query</span><span class="comma">,</span> <span class="id label">label</span><span class="op">|</span>
      <span class="id index">index</span> <span class="op">+=</span> <span class="int">1</span>
      <span class="id do_run">do_run</span><span class="lparen">(</span><span class="id query">query</span><span class="comma">,</span> <span class="tstring"><span class="tstring_beg">"</span><span class="embexpr_beg">#{</span><span class="id index">index</span><span class="rbrace">}</span><span class="tstring_content">. </span><span class="embexpr_beg">#{</span><span class="id label">label</span><span class="rbrace">}</span><span class="tstring_end">"</span></span><span class="rparen">)</span>
      <span class="id puts">puts</span>
      <span class="id puts">puts</span>
    <span class="kw">end</span>
  <span class="kw">end</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="run_once-instance_method">
  
    - (<tt>Object</tt>) <strong>run_once</strong>(query) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


822
823
824
825</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 822</span>

<span class="kw">def</span> <span class="id run_once">run_once</span><span class="lparen">(</span><span class="id query">query</span><span class="rparen">)</span>
  <span class="id benchmarks">benchmarks</span> <span class="op">=</span> <span class="id do_run_once">do_run_once</span><span class="lparen">(</span><span class="id query">query</span><span class="rparen">)</span>
  <span class="id report_benchmarks">report_benchmarks</span><span class="lparen">(</span><span class="id benchmarks">benchmarks</span><span class="comma">,</span> <span class="id query">query</span><span class="rparen">)</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <p class="signature " id="verify_results-instance_method">
  
    - (<tt>Object</tt>) <strong>verify_results</strong>(benchmarks) 
  

  
</p><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


875
876
877
878
879
880
881
882
883</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'benchmark/select.rb', line 875</span>

<span class="kw">def</span> <span class="id verify_results">verify_results</span><span class="lparen">(</span><span class="id benchmarks">benchmarks</span><span class="rparen">)</span>
  <span class="kw">return</span> <span class="kw">if</span> <span class="const">ENV</span><span class="lbracket">[</span><span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">NO_VERIFY</span><span class="tstring_end">"</span></span><span class="rbracket">]</span>
  <span class="id benchmarks">benchmarks</span> <span class="op">=</span> <span class="id benchmarks">benchmarks</span><span class="period">.</span><span class="id dup">dup</span>

  <span class="id expected_result">expected_result</span> <span class="op">=</span> <span class="id benchmarks">benchmarks</span><span class="period">.</span><span class="id shift">shift</span><span class="period">.</span><span class="id result">result</span>
  <span class="id benchmarks">benchmarks</span><span class="period">.</span><span class="id each">each</span> <span class="kw">do</span> <span class="op">|</span><span class="id benchmark">benchmark</span><span class="op">|</span>
    <span class="id raise">raise</span> <span class="tstring"><span class="tstring_beg">"</span><span class="tstring_content">bad</span><span class="tstring_end">"</span></span> <span class="kw">unless</span> <span class="id assert_equivalent_to">assert_equivalent_to</span><span class="lparen">(</span><span class="id expected_result">expected_result</span><span class="comma">,</span> <span class="id benchmark">benchmark</span><span class="period">.</span><span class="id result">result</span><span class="rparen">)</span>
  <span class="kw">end</span>
<span class="kw">end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>
    
    <div id="footer"></div>

  
    </div>

    <div class="sponsors">
      <p id="sponsor-rubyforge">
        <a href="http://rubyforge.org/projects/groonga/">
          <img src="../../rubyforge.png" width="120" height="24" border="0" alt="ラングバプロジェクトはRubyForge.orgにホスティングしてもらっています。" />
        </a>
      </p>
      <p id="sponsor-github">
        <a href="http://github.com/ranguba/">
          <img src="../../github-logo.png" width="100" height="45" border="0" alt="ラングバプロジェクトはGitHubにホスティングしてもらっています。" />
        </a>
      </p>
      <p id="sponsor-tango">
	<a href="http://tango.freedesktop.org/">
          <img width="120" height="53" border="0" alt="Tango Desktop Projectのアイコンを利用しています。" src="../../tango-logo.png" />
        </a>
      </p>

<!-- Piwik -->
<a href="http://piwik.org" title="Web analytics" onclick="window.open(this.href);return(false);">
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://www.clear-code.com/piwik/" : "http://www.clear-code.com/piwik/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
piwik_action_name = '';
piwik_idsite = 2;
piwik_url = pkBaseURL + "piwik.php";
piwik_log(piwik_action_name, piwik_idsite, piwik_url);
</script>
<object><noscript><p>Web analytics <img src="http://www.clear-code.com/piwik/piwik.php?idsite=2" style="border:0" alt=""/></p></noscript></object></a>
<!-- End Piwik Tag -->
    </div>

</body>
</html>
